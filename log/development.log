# Logfile created on Thu May 02 14:39:57 +0200 2013

Processing PatientsController#show (for 127.0.0.1 at 2013-05-02 14:40:11) [GET]
  Parameters: {"user_id"=>"1", "id"=>"175", "location_id"=>"721"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.4ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.each):
  app/controllers/patients_controller.rb:23:in `show'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (31.3ms)
Rendered rescues/_request_and_response (1.4ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-02 14:41:42) [GET]
Redirected to http://0.0.0.0:3009/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 73ms (DB: 0) | 302 Found [http://0.0.0.0/]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-02 14:41:42) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=0.0.0.0:3009
Completed in 7ms (DB: 0) | 302 Found [http://0.0.0.0/user_login?internal=true]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-02 14:42:01) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 111ms (View: 20, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-02 14:42:01) [GET]

ActionController::RoutingError (No route matches "/touchscreentoolkit/lib/javascripts/touchScreenToolkit.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-02 14:42:35) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 146ms (View: 74, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-02 14:42:36) [GET]

ActionController::RoutingError (No route matches "/touchscreentoolkit/lib/javascripts/touchScreenToolkit.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-02 14:43:21) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 84ms (View: 8, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-02 14:43:21) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering clinic/overview
Completed in 62ms (View: 6, DB: 0) | 200 OK [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-02 14:44:50) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 193ms (View: 7, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-02 14:44:50) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering clinic/overview
Completed in 59ms (View: 1, DB: 0) | 200 OK [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-02 14:53:39) [GET]
  Parameters: {"user_id"=>"1", "ext_patient_id"=>"176", "location_id"=>"721"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://0.0.0.0:3009/patients/show/176?user_id=1&location_id=721
Completed in 73ms (DB: 0) | 302 Found [http://0.0.0.0/?user_id=1&location_id=721&ext_patient_id=176]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-02 14:53:40) [GET]
  Parameters: {"id"=>"176", "user_id"=>"1", "location_id"=>"721"}
  [4;35;1mPatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mUserProperty Load (0.3ms)[0m   [0mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;36;1mPerson Load (0.4ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 176 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.6ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 176 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 176 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 176 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.5ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 176 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 320ms (View: 139, DB: 3) | 200 OK [http://0.0.0.0/patients/show/176?user_id=1&location_id=721]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-02 14:53:40) [GET]
  Parameters: {"id"=>"176", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mProgramEncounter Load (0.5ms)[0m   [0mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 176) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 176)) [0m
Rendering patients/current_visit
Completed in 111ms (View: 11, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/176?user_id=1]


Processing ProtocolPatientsController#hiv_status (for 127.0.0.1 at 2013-05-02 14:54:18) [GET]
  Parameters: {"patient_id"=>"176", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/hiv_status
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 188ms (View: 25, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/hiv_status?patient_id=176&user_id=1]


Processing ProtocolPatientsController#hiv_status (for 127.0.0.1 at 2013-05-02 15:01:26) [GET]
  Parameters: {"patient_id"=>"176", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/hiv_status
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 103ms (View: 17, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/hiv_status?patient_id=176&user_id=1]


Processing ProtocolPatientsController#hiv_status (for 127.0.0.1 at 2013-05-02 15:02:05) [GET]
  Parameters: {"patient_id"=>"176", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/hiv_status
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 107ms (View: 18, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/hiv_status?patient_id=176&user_id=1]


Processing ProtocolPatientsController#hiv_status (for 127.0.0.1 at 2013-05-02 15:25:17) [GET]
  Parameters: {"patient_id"=>"176", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/hiv_status
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 171ms (View: 22, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/hiv_status?patient_id=176&user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-02 15:25:20) [GET]
  Parameters: {"id"=>"176", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 176 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 176 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 176 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 176 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 176 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 167ms (View: 64, DB: 2) | 200 OK [http://0.0.0.0/patients/show/176?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-02 15:25:21) [GET]
  Parameters: {"id"=>"176", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 176) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 176)) [0m
Rendering patients/current_visit
Completed in 90ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/176?user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-02 15:31:55) [GET]
  Parameters: {"id"=>"176", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mUserProperty Load (0.1ms)[0m   [0mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 176 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 176 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 176 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 176 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 176 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 235ms (View: 134, DB: 2) | 200 OK [http://0.0.0.0/patients/show/176?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-02 15:31:56) [GET]
  Parameters: {"id"=>"176", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mProgramEncounter Load (0.5ms)[0m   [0mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 176) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 176)) [0m
Rendering patients/current_visit
Completed in 161ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/176?user_id=1]


Processing ProtocolPatientsController#vitals (for 127.0.0.1 at 2013-05-02 15:31:59) [GET]
  Parameters: {"patient_id"=>"176", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/vitals
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 192ms (View: 24, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/vitals?patient_id=176&user_id=1]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-02 15:32:42) [POST]
  Parameters: {"patient_id"=>"176", "program"=>"CHRONIC CARE MODULE", "user_id"=>"1", "encounter_type"=>"VITALS ", "concept"=>{"Diastolic blood pressure"=>"123/56", "Temperature"=>"123", "Waist circumference (in cm)"=>"123", "Height"=>"180", "Oxygen saturation"=>"1235", "Respiratory rate"=>"236", "Weight"=>"123", "Pulse rate"=>"263", "Systolic blood pressure"=>"23/56"}}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mEncounterType Load (0.6ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'VITALS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mEncounter Create (0.5ms)[0m   [0;1mINSERT INTO `encounter` (`changed_by`, `patient_id`, `date_created`, `encounter_datetime`, `voided`, `encounter_type`, `provider_id`, `uuid`, `date_changed`, `void_reason`, `date_voided`, `creator`, `form_id`, `location_id`, `voided_by`) VALUES(NULL, 176, '2013-05-02 15:32:42', '2013-05-02 15:32:42', 0, 6, 1, 'c45aa0fd-b32c-11e2-83b6-0024be7f1be1', NULL, NULL, NULL, 1, NULL, 721, NULL)[0m
  [4;35;1mSQL (67.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mConceptName Load (0.6ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3009/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 313ms (DB: 70) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-02 15:32:43) [POST]
  Parameters: {"patient_id"=>"176", "program"=>"CHRONIC CARE MODULE", "user_id"=>"1", "encounter_type"=>"VITALS ", "concept"=>{"Diastolic blood pressure"=>"123/56", "Temperature"=>"123", "Waist circumference (in cm)"=>"123", "Height"=>"180", "Oxygen saturation"=>"1235", "Respiratory rate"=>"236", "Weight"=>"123", "Pulse rate"=>"263", "Systolic blood pressure"=>"23/56"}}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;36;1mEncounterType Load (0.2ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'VITALS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mEncounter Create (0.6ms)[0m   [0mINSERT INTO `encounter` (`changed_by`, `patient_id`, `date_created`, `encounter_datetime`, `voided`, `encounter_type`, `provider_id`, `uuid`, `date_changed`, `void_reason`, `date_voided`, `creator`, `form_id`, `location_id`, `voided_by`) VALUES(NULL, 176, '2013-05-02 15:32:43', '2013-05-02 15:32:43', 0, 6, 1, 'c48e5bd0-b32c-11e2-83b6-0024be7f1be1', NULL, NULL, NULL, 1, NULL, 721, NULL)[0m
  [4;36;1mSQL (51.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3009/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 231ms (DB: 53) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-02 15:32:43) [POST]
  Parameters: {"patient_id"=>"176", "program"=>"CHRONIC CARE MODULE", "user_id"=>"1", "encounter_type"=>"VITALS ", "concept"=>{"Diastolic blood pressure"=>"123/56", "Temperature"=>"123", "Waist circumference (in cm)"=>"123", "Height"=>"180", "Oxygen saturation"=>"1235", "Respiratory rate"=>"236", "Weight"=>"123", "Pulse rate"=>"263", "Systolic blood pressure"=>"23/56"}}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mEncounterType Load (0.2ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'VITALS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mEncounter Create (0.5ms)[0m   [0;1mINSERT INTO `encounter` (`changed_by`, `patient_id`, `date_created`, `encounter_datetime`, `voided`, `encounter_type`, `provider_id`, `uuid`, `date_changed`, `void_reason`, `date_voided`, `creator`, `form_id`, `location_id`, `voided_by`) VALUES(NULL, 176, '2013-05-02 15:32:43', '2013-05-02 15:32:43', 0, 6, 1, 'c4c16c27-b32c-11e2-83b6-0024be7f1be1', NULL, NULL, NULL, 1, NULL, 721, NULL)[0m
  [4;35;1mSQL (50.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3009/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 227ms (DB: 53) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-02 15:32:43) [POST]
  Parameters: {"patient_id"=>"176", "program"=>"CHRONIC CARE MODULE", "user_id"=>"1", "encounter_type"=>"VITALS ", "concept"=>{"Diastolic blood pressure"=>"123/56", "Temperature"=>"123", "Waist circumference (in cm)"=>"123", "Height"=>"180", "Oxygen saturation"=>"1235", "Respiratory rate"=>"236", "Weight"=>"123", "Pulse rate"=>"263", "Systolic blood pressure"=>"23/56"}}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;36;1mEncounterType Load (0.2ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'VITALS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mEncounter Create (0.5ms)[0m   [0mINSERT INTO `encounter` (`changed_by`, `patient_id`, `date_created`, `encounter_datetime`, `voided`, `encounter_type`, `provider_id`, `uuid`, `date_changed`, `void_reason`, `date_voided`, `creator`, `form_id`, `location_id`, `voided_by`) VALUES(NULL, 176, '2013-05-02 15:32:43', '2013-05-02 15:32:43', 0, 6, 1, 'c4fc47c4-b32c-11e2-83b6-0024be7f1be1', NULL, NULL, NULL, 1, NULL, 721, NULL)[0m
  [4;36;1mSQL (144.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3009/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 454ms (DB: 146) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-02 15:32:44) [POST]
  Parameters: {"patient_id"=>"176", "program"=>"CHRONIC CARE MODULE", "user_id"=>"1", "encounter_type"=>"VITALS ", "concept"=>{"Diastolic blood pressure"=>"123/56", "Temperature"=>"123", "Waist circumference (in cm)"=>"123", "Height"=>"180", "Oxygen saturation"=>"1235", "Respiratory rate"=>"236", "Weight"=>"123", "Pulse rate"=>"263", "Systolic blood pressure"=>"23/56"}}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mEncounterType Load (0.2ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'VITALS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mEncounter Create (0.5ms)[0m   [0;1mINSERT INTO `encounter` (`changed_by`, `patient_id`, `date_created`, `encounter_datetime`, `voided`, `encounter_type`, `provider_id`, `uuid`, `date_changed`, `void_reason`, `date_voided`, `creator`, `form_id`, `location_id`, `voided_by`) VALUES(NULL, 176, '2013-05-02 15:32:44', '2013-05-02 15:32:44', 0, 6, 1, 'c53bd316-b32c-11e2-83b6-0024be7f1be1', NULL, NULL, NULL, 1, NULL, 721, NULL)[0m
  [4;35;1mSQL (95.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3009/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 345ms (DB: 97) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-02 15:32:44) [POST]
  Parameters: {"patient_id"=>"176", "program"=>"CHRONIC CARE MODULE", "user_id"=>"1", "encounter_type"=>"VITALS ", "concept"=>{"Diastolic blood pressure"=>"123/56", "Temperature"=>"123", "Waist circumference (in cm)"=>"123", "Height"=>"180", "Oxygen saturation"=>"1235", "Respiratory rate"=>"236", "Weight"=>"123", "Pulse rate"=>"263", "Systolic blood pressure"=>"23/56"}}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;36;1mEncounterType Load (0.2ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'VITALS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mEncounter Create (0.5ms)[0m   [0mINSERT INTO `encounter` (`changed_by`, `patient_id`, `date_created`, `encounter_datetime`, `voided`, `encounter_type`, `provider_id`, `uuid`, `date_changed`, `void_reason`, `date_voided`, `creator`, `form_id`, `location_id`, `voided_by`) VALUES(NULL, 176, '2013-05-02 15:32:44', '2013-05-02 15:32:44', 0, 6, 1, 'c578862b-b32c-11e2-83b6-0024be7f1be1', NULL, NULL, NULL, 1, NULL, 721, NULL)[0m
  [4;36;1mSQL (131.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3009/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 411ms (DB: 133) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-02 15:32:44) [POST]
  Parameters: {"patient_id"=>"176", "program"=>"CHRONIC CARE MODULE", "user_id"=>"1", "encounter_type"=>"VITALS ", "concept"=>{"Diastolic blood pressure"=>"123/56", "Temperature"=>"123", "Waist circumference (in cm)"=>"123", "Height"=>"180", "Oxygen saturation"=>"1235", "Respiratory rate"=>"236", "Weight"=>"123", "Pulse rate"=>"263", "Systolic blood pressure"=>"23/56"}}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'VITALS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mEncounter Create (0.5ms)[0m   [0;1mINSERT INTO `encounter` (`changed_by`, `patient_id`, `date_created`, `encounter_datetime`, `voided`, `encounter_type`, `provider_id`, `uuid`, `date_changed`, `void_reason`, `date_voided`, `creator`, `form_id`, `location_id`, `voided_by`) VALUES(NULL, 176, '2013-05-02 15:32:45', '2013-05-02 15:32:45', 0, 6, 1, 'c5b80efe-b32c-11e2-83b6-0024be7f1be1', NULL, NULL, NULL, 1, NULL, 721, NULL)[0m
  [4;35;1mSQL (82.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3009/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 338ms (DB: 85) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-02 15:32:54) [POST]
  Parameters: {"patient_id"=>"176", "program"=>"CHRONIC CARE MODULE", "user_id"=>"1", "encounter_type"=>"VITALS ", "concept"=>{"Diastolic blood pressure"=>"123/56", "Temperature"=>"123", "Waist circumference (in cm)"=>"123", "Height"=>"180", "Oxygen saturation"=>"1235", "Respiratory rate"=>"236", "Weight"=>"123", "Pulse rate"=>"263", "Systolic blood pressure"=>"23/56"}}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;36;1mEncounterType Load (0.2ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'VITALS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mEncounter Create (0.4ms)[0m   [0mINSERT INTO `encounter` (`changed_by`, `patient_id`, `date_created`, `encounter_datetime`, `voided`, `encounter_type`, `provider_id`, `uuid`, `date_changed`, `void_reason`, `date_voided`, `creator`, `form_id`, `location_id`, `voided_by`) VALUES(NULL, 176, '2013-05-02 15:32:54', '2013-05-02 15:32:54', 0, 6, 1, 'cb62a7e4-b32c-11e2-83b6-0024be7f1be1', NULL, NULL, NULL, 1, NULL, 721, NULL)[0m
  [4;36;1mSQL (83.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3009/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 411ms (DB: 86) | 302 Found [http://0.0.0.0/encounters/create]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-02 15:33:00) [GET]
  Parameters: {"id"=>"176", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 176 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 176 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 176 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 176 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 176 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 245ms (View: 139, DB: 2) | 200 OK [http://0.0.0.0/patients/show/176?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-02 15:33:01) [GET]
  Parameters: {"id"=>"176", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.4ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 176) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 176)) [0m
Rendering patients/current_visit
Completed in 96ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/176?user_id=1]


Processing PatientsController#visit_history (for 127.0.0.1 at 2013-05-02 15:34:07) [GET]
  Parameters: {"id"=>"176", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.9ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 176) ORDER BY date_time DESC[0m
Rendering patients/visit_history
Completed in 112ms (View: 26, DB: 1) | 200 OK [http://0.0.0.0/patients/visit_history/176?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-02 15:34:10) [GET]
  Parameters: {"id"=>"176", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.4ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 176) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 176)) [0m
Rendering patients/current_visit
Completed in 98ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/176?user_id=1]


Processing PatientsController#visit_history (for 127.0.0.1 at 2013-05-02 15:34:11) [GET]
  Parameters: {"id"=>"176", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 176) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.2ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 176) ORDER BY date_time DESC[0m
Rendering patients/visit_history
Completed in 156ms (View: 1, DB: 0) | 200 OK [http://0.0.0.0/patients/visit_history/176?user_id=1]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 07:45:17) [GET]
Redirected to http://0.0.0.0:3008/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 425ms (DB: 0) | 302 Found [http://0.0.0.0/]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 07:45:18) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=0.0.0.0:3008
Completed in 7ms (DB: 0) | 302 Found [http://0.0.0.0/user_login?internal=true]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 07:45:44) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (0.3ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.3ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 154ms (View: 35, DB: 2) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 07:45:44) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/overview
Completed in 138ms (View: 82, DB: 0) | 200 OK [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 07:47:15) [GET]
  Parameters: {"location_id"=>"721", "ext_patient_id"=>"175", "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://0.0.0.0:3008/patients/show/175?user_id=1&location_id=721
Completed in 108ms (DB: 1) | 302 Found [http://0.0.0.0/?user_id=1&location_id=721&ext_patient_id=175]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 07:47:15) [GET]
  Parameters: {"location_id"=>"721", "id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.4ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.5ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.5ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.5ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 477ms (View: 136, DB: 3) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1&location_id=721]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 07:47:16) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 104ms (View: 12, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 08:02:03) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/overview
Completed in 113ms (View: 1, DB: 0) | 200 OK [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 08:02:26) [GET]
  Parameters: {"location_id"=>"721", "ext_patient_id"=>"174", "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://0.0.0.0:3008/patients/show/174?user_id=1&location_id=721
Completed in 74ms (DB: 0) | 302 Found [http://0.0.0.0/?user_id=1&location_id=721&ext_patient_id=174]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 08:02:26) [GET]
  Parameters: {"location_id"=>"721", "id"=>"174", "user_id"=>"1"}
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.5ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.5ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 217ms (View: 68, DB: 3) | 200 OK [http://0.0.0.0/patients/show/174?user_id=1&location_id=721]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 08:02:27) [GET]
  Parameters: {"id"=>"174", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.4ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 174) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 174)) [0m
Rendering patients/current_visit
Completed in 158ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/174?user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 08:37:00) [GET]
  Parameters: {"location_id"=>"721", "id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mUserProperty Load (0.1ms)[0m   [0mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 238ms (View: 66, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1&location_id=721]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 08:37:01) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mProgramEncounter Load (0.6ms)[0m   [0mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 96ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing ProtocolPatientsController#lab_results (for 127.0.0.1 at 2013-05-06 08:37:03) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/lab_results
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 107ms (View: 21, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/lab_results?patient_id=175&user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 08:42:01) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 164ms (View: 63, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 08:42:02) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.7ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 219ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 08:42:07) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mUserProperty Load (0.1ms)[0m   [0mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 229ms (View: 127, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 08:42:07) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mProgramEncounter Load (0.5ms)[0m   [0mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 97ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing ProtocolPatientsController#lab_results (for 127.0.0.1 at 2013-05-06 08:42:09) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/lab_results
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 240ms (View: 156, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/lab_results?patient_id=175&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:42:10) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:42:10) [GET]

ActionController::RoutingError (No route matches "/javascripts/utils.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ProtocolPatientsController#lab_results (for 127.0.0.1 at 2013-05-06 08:44:15) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/lab_results
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 171ms (View: 83, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/lab_results?patient_id=175&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:44:16) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:44:16) [GET]

ActionController::RoutingError (No route matches "/javascripts/utils.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ProtocolPatientsController#lab_results (for 127.0.0.1 at 2013-05-06 08:49:35) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/lab_results
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 219ms (View: 73, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/lab_results?patient_id=175&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:49:36) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:49:36) [GET]

ActionController::RoutingError (No route matches "/javascripts/utils.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:49:36) [GET]

ActionController::RoutingError (No route matches "/javascripts/utils.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ProtocolPatientsController#lab_results (for 127.0.0.1 at 2013-05-06 08:51:37) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/lab_results
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 244ms (View: 144, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/lab_results?patient_id=175&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:51:37) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:51:37) [GET]

ActionController::RoutingError (No route matches "/javascripts/utils.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ProtocolPatientsController#lab_results (for 127.0.0.1 at 2013-05-06 08:52:48) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/lab_results
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 223ms (View: 142, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/lab_results?patient_id=175&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:52:48) [GET]

ActionController::RoutingError (No route matches "/javascripts/utils.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:52:48) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:52:48) [GET]

ActionController::RoutingError (No route matches "/javascripts/utils.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ProtocolPatientsController#lab_results (for 127.0.0.1 at 2013-05-06 08:53:04) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/lab_results
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 233ms (View: 148, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/lab_results?patient_id=175&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:53:05) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:53:05) [GET]

ActionController::RoutingError (No route matches "/javascripts/utils.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:53:05) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:53:05) [GET]

ActionController::RoutingError (No route matches "/javascripts/utils.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ProtocolPatientsController#lab_results (for 127.0.0.1 at 2013-05-06 08:53:43) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/lab_results
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 256ms (View: 75, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/lab_results?patient_id=175&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:53:43) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:53:43) [GET]

ActionController::RoutingError (No route matches "/javascripts/utils.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ProtocolPatientsController#lab_results (for 127.0.0.1 at 2013-05-06 08:54:52) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/lab_results
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 303ms (View: 72, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/lab_results?patient_id=175&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:54:53) [GET]

ActionController::RoutingError (No route matches "/javascripts/utils.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:54:53) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:54:53) [GET]

ActionController::RoutingError (No route matches "/javascripts/utils.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ProtocolPatientsController#lab_results (for 127.0.0.1 at 2013-05-06 08:55:34) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/lab_results
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 172ms (View: 75, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/lab_results?patient_id=175&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:55:34) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:55:34) [GET]

ActionController::RoutingError (No route matches "/javascripts/utils.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ProtocolPatientsController#lab_results (for 127.0.0.1 at 2013-05-06 08:55:52) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/lab_results
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 163ms (View: 73, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/lab_results?patient_id=175&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:55:52) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 08:55:52) [GET]

ActionController::RoutingError (No route matches "/javascripts/utils.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing EncountersController#create (for 127.0.0.1 at 2013-05-06 08:56:55) [GET]
  Parameters: {"rbs_unit"=>"", "id"=>"lab_results", "rbs_value_numeric"=>"", "filter"=>{"provider"=>""}, "fbs_unit"=>"mmol/l", "cf_unit"=>"", "HbA1c_value_numeric"=>"", "cf_value_lo_or_hi"=>"", "cnf_unit"=>"", "fbs_value_numeric"=>"23", "observations"=>[{"value_coded_or_text"=>"FASTING", "concept_name"=>"BLOOD SUGAR TEST TYPE", "obs_datetime"=>"2013-05-06T08:55:52+02:00"}, {"parent_concept_name"=>"BLOOD SUGAR TEST TYPE", "measurement_unit"=>"mmol/l", "concept_name"=>"FASTING", "value_numeric"=>"23"}, {"value_coded_or_text"=>"", "concept_name"=>""}, {"parent_concept_name"=>"", "measurement_unit"=>"", "concept_name"=>"", "value_numeric"=>"", "obs_datetime"=>"2013-05-06T08:55:52+02:00"}, {"value_coded_or_text"=>"", "concept_name"=>"", "obs_datetime"=>"2013-05-06T08:55:52+02:00"}, {"parent_concept_name"=>"", "measurement_unit"=>"", "concept_name"=>"", "value_numeric"=>"", "obs_datetime"=>"2013-05-06T08:55:52+02:00"}, {"value_coded_or_text"=>"", "concept_name"=>"", "patient_id"=>"175", "obs_datetime"=>"2013-05-06T08:55:52+02:00"}, {"parent_concept_name"=>"", "measurement_unit"=>"", "concept_name"=>"", "value_text"=>"", "value_numeric"=>"", "obs_datetime"=>"2013-05-06T08:55:52+02:00"}, {"value_coded_or_text"=>"", "concept_name"=>"", "obs_datetime"=>"2013-05-06T08:55:52+02:00"}, {"parent_concept_name"=>"", "measurement_unit"=>"", "concept_name"=>"", "value_text"=>"", "value_numeric"=>"", "obs_datetime"=>"2013-05-06T08:55:52+02:00"}], "cf_value_numeric"=>"", "cnf_value_lo_or_hi"=>"", "encounter"=>{"encounter_type_name"=>"LAB RESULTS", "encounter_datetime"=>"2013-05-06T08:55:52+02:00"}, "test_type_values"=>["FASTING BLOOD SUGAR"], "cnf_value_numeric"=>""}
Redirected to http://0.0.0.0:3008/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 34ms (DB: 0) | 302 Found [http://0.0.0.0/encounters/create/lab_results?encounter%5Bencounter_type_name%5D=LAB+RESULTS&encounter%5Bencounter_datetime%5D=2013-05-06T08%3A55%3A52%2B02%3A00&test_type_values%5B%5D=FASTING+BLOOD+SUGAR&fbs_unit=mmol%2Fl&fbs_value_numeric=23&observations%5B%5D%5Bconcept_name%5D=BLOOD+SUGAR+TEST+TYPE&observations%5B%5D%5Bvalue_coded_or_text%5D=FASTING&observations%5B%5D%5Bobs_datetime%5D=2013-05-06T08%3A55%3A52%2B02%3A00&observations%5B%5D%5Bconcept_name%5D=FASTING&observations%5B%5D%5Bvalue_numeric%5D=23&observations%5B%5D%5Bmeasurement_unit%5D=mmol%2Fl&observations%5B%5D%5Bparent_concept_name%5D=BLOOD+SUGAR+TEST+TYPE&rbs_unit=&rbs_value_numeric=&observations%5B%5D%5Bconcept_name%5D=&observations%5B%5D%5Bvalue_coded_or_text%5D=&observations%5B%5D%5Bconcept_name%5D=&observations%5B%5D%5Bvalue_numeric%5D=&observations%5B%5D%5Bmeasurement_unit%5D=&observations%5B%5D%5Bparent_concept_name%5D=&observations%5B%5D%5Bobs_datetime%5D=2013-05-06T08%3A55%3A52%2B02%3A00&HbA1c_value_numeric=&observations%5B%5D%5Bconcept_name%5D=&observations%5B%5D%5Bvalue_coded_or_text%5D=&observations%5B%5D%5Bobs_datetime%5D=2013-05-06T08%3A55%3A52%2B02%3A00&observations%5B%5D%5Bconcept_name%5D=&observations%5B%5D%5Bvalue_numeric%5D=&observations%5B%5D%5Bmeasurement_unit%5D=&observations%5B%5D%5Bparent_concept_name%5D=&observations%5B%5D%5Bobs_datetime%5D=2013-05-06T08%3A55%3A52%2B02%3A00&cf_unit=&cf_value_numeric=&cf_value_lo_or_hi=&observations%5B%5D%5Bconcept_name%5D=&observations%5B%5D%5Bvalue_coded_or_text%5D=&observations%5B%5D%5Bpatient_id%5D=175&observations%5B%5D%5Bobs_datetime%5D=2013-05-06T08%3A55%3A52%2B02%3A00&observations%5B%5D%5Bconcept_name%5D=&observations%5B%5D%5Bvalue_text%5D=&observations%5B%5D%5Bvalue_numeric%5D=&observations%5B%5D%5Bmeasurement_unit%5D=&observations%5B%5D%5Bparent_concept_name%5D=&observations%5B%5D%5Bobs_datetime%5D=2013-05-06T08%3A55%3A52%2B02%3A00&cnf_unit=&cnf_value_numeric=&cnf_value_lo_or_hi=&observations%5B%5D%5Bconcept_name%5D=&observations%5B%5D%5Bvalue_coded_or_text%5D=&observations%5B%5D%5Bobs_datetime%5D=2013-05-06T08%3A55%3A52%2B02%3A00&observations%5B%5D%5Bconcept_name%5D=&observations%5B%5D%5Bvalue_text%5D=&observations%5B%5D%5Bvalue_numeric%5D=&observations%5B%5D%5Bmeasurement_unit%5D=&observations%5B%5D%5Bparent_concept_name%5D=&observations%5B%5D%5Bobs_datetime%5D=2013-05-06T08%3A55%3A52%2B02%3A00&filter%5Bprovider%5D=]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 08:56:55) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=0.0.0.0:3008
Completed in 6ms (DB: 0) | 302 Found [http://0.0.0.0/user_login?internal=true]


Processing ProtocolPatientsController#lab_results (for 127.0.0.1 at 2013-05-06 09:06:38) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/lab_results
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 169ms (View: 22, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/lab_results?patient_id=175&user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 09:06:42) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 173ms (View: 64, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 09:06:42) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 160ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing ProtocolPatientsController#complications (for 127.0.0.1 at 2013-05-06 09:06:46) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/complications
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 108ms (View: 23, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/complications?patient_id=175&user_id=1]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-06 09:06:57) [POST]
  Parameters: {"program"=>"CHRONIC CARE MODULE", "encounter_type"=>"COMPLICATIONS ", "patient_id"=>"175", "concept"=>{"Complications"=>"Amputation"}, "user_id"=>"1"}
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mEncounterType Load (0.8ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'COMPLICATIONS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mEncounter Create (20.6ms)[0m   [0mINSERT INTO `encounter` (`creator`, `location_id`, `date_changed`, `changed_by`, `form_id`, `date_voided`, `encounter_type`, `provider_id`, `date_created`, `uuid`, `patient_id`, `voided_by`, `encounter_datetime`, `voided`, `void_reason`) VALUES(1, 721, NULL, NULL, NULL, NULL, 31, 1, '2013-05-06 09:06:57', '8a664736-b61b-11e2-a9db-0024be7f1be1', 175, NULL, '2013-05-06 09:06:57', 0, NULL)[0m
  [4;36;1mSQL (51.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mConceptName Load (0.7ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3008/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 339ms (DB: 75) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-06 09:06:57) [POST]
  Parameters: {"program"=>"CHRONIC CARE MODULE", "encounter_type"=>"COMPLICATIONS ", "patient_id"=>"175", "concept"=>{"Complications"=>"Amputation"}, "user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mEncounterType Load (0.2ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'COMPLICATIONS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mEncounter Create (18.1ms)[0m   [0;1mINSERT INTO `encounter` (`creator`, `location_id`, `date_changed`, `changed_by`, `form_id`, `date_voided`, `encounter_type`, `provider_id`, `date_created`, `uuid`, `patient_id`, `voided_by`, `encounter_datetime`, `voided`, `void_reason`) VALUES(1, 721, NULL, NULL, NULL, NULL, 31, 1, '2013-05-06 09:06:58', '8aa5b8ce-b61b-11e2-a9db-0024be7f1be1', 175, NULL, '2013-05-06 09:06:58', 0, NULL)[0m
  [4;35;1mSQL (50.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3008/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 390ms (DB: 70) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-06 09:06:58) [POST]
  Parameters: {"program"=>"CHRONIC CARE MODULE", "encounter_type"=>"COMPLICATIONS ", "patient_id"=>"175", "concept"=>{"Complications"=>"Amputation"}, "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mEncounterType Load (0.2ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'COMPLICATIONS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mEncounter Create (68.0ms)[0m   [0mINSERT INTO `encounter` (`creator`, `location_id`, `date_changed`, `changed_by`, `form_id`, `date_voided`, `encounter_type`, `provider_id`, `date_created`, `uuid`, `patient_id`, `voided_by`, `encounter_datetime`, `voided`, `void_reason`) VALUES(1, 721, NULL, NULL, NULL, NULL, 31, 1, '2013-05-06 09:06:58', '8adb1f67-b61b-11e2-a9db-0024be7f1be1', 175, NULL, '2013-05-06 09:06:58', 0, NULL)[0m
  [4;36;1mSQL (74.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3008/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 395ms (DB: 144) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-06 09:06:58) [POST]
  Parameters: {"program"=>"CHRONIC CARE MODULE", "encounter_type"=>"COMPLICATIONS ", "patient_id"=>"175", "concept"=>{"Complications"=>"Amputation"}, "user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'COMPLICATIONS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mEncounter Create (24.9ms)[0m   [0;1mINSERT INTO `encounter` (`creator`, `location_id`, `date_changed`, `changed_by`, `form_id`, `date_voided`, `encounter_type`, `provider_id`, `date_created`, `uuid`, `patient_id`, `voided_by`, `encounter_datetime`, `voided`, `void_reason`) VALUES(1, 721, NULL, NULL, NULL, NULL, 31, 1, '2013-05-06 09:06:58', '8b19f269-b61b-11e2-a9db-0024be7f1be1', 175, NULL, '2013-05-06 09:06:58', 0, NULL)[0m
  [4;35;1mSQL (67.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3008/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 340ms (DB: 94) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-06 09:06:59) [POST]
  Parameters: {"program"=>"CHRONIC CARE MODULE", "encounter_type"=>"COMPLICATIONS ", "patient_id"=>"175", "concept"=>{"Complications"=>"Amputation"}, "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'COMPLICATIONS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mEncounter Create (0.5ms)[0m   [0mINSERT INTO `encounter` (`creator`, `location_id`, `date_changed`, `changed_by`, `form_id`, `date_voided`, `encounter_type`, `provider_id`, `date_created`, `uuid`, `patient_id`, `voided_by`, `encounter_datetime`, `voided`, `void_reason`) VALUES(1, 721, NULL, NULL, NULL, NULL, 31, 1, '2013-05-06 09:06:59', '8b465c23-b61b-11e2-a9db-0024be7f1be1', 175, NULL, '2013-05-06 09:06:59', 0, NULL)[0m
  [4;36;1mSQL (106.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3008/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 350ms (DB: 108) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-06 09:06:59) [POST]
  Parameters: {"program"=>"CHRONIC CARE MODULE", "encounter_type"=>"COMPLICATIONS ", "patient_id"=>"175", "concept"=>{"Complications"=>"Amputation"}, "user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'COMPLICATIONS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mEncounter Create (48.5ms)[0m   [0;1mINSERT INTO `encounter` (`creator`, `location_id`, `date_changed`, `changed_by`, `form_id`, `date_voided`, `encounter_type`, `provider_id`, `date_created`, `uuid`, `patient_id`, `voided_by`, `encounter_datetime`, `voided`, `void_reason`) VALUES(1, 721, NULL, NULL, NULL, NULL, 31, 1, '2013-05-06 09:06:59', '8b8925be-b61b-11e2-a9db-0024be7f1be1', 175, NULL, '2013-05-06 09:06:59', 0, NULL)[0m
  [4;35;1mSQL (86.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3008/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 437ms (DB: 136) | 302 Found [http://0.0.0.0/encounters/create]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 09:07:09) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mUserProperty Load (0.1ms)[0m   [0mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 169ms (View: 63, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 09:07:09) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mProgramEncounter Load (0.5ms)[0m   [0mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 173ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 09:26:07) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 171ms (View: 63, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 09:26:07) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 108ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing ProtocolPatientsController#complications (for 127.0.0.1 at 2013-05-06 09:26:11) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/complications
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 178ms (View: 21, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/complications?patient_id=175&user_id=1]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-06 09:26:21) [POST]
  Parameters: {"program"=>"CHRONIC CARE MODULE", "encounter_type"=>"COMPLICATIONS ", "patient_id"=>"175", "concept"=>{"Test month "=>"", "Test day "=>"", "Complications"=>"Amputation", "Test year "=>""}, "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mEncounterType Load (0.2ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'COMPLICATIONS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mEncounter Create (14.8ms)[0m   [0mINSERT INTO `encounter` (`creator`, `location_id`, `date_changed`, `changed_by`, `form_id`, `date_voided`, `encounter_type`, `provider_id`, `date_created`, `uuid`, `patient_id`, `voided_by`, `encounter_datetime`, `voided`, `void_reason`) VALUES(1, 721, NULL, NULL, NULL, NULL, 31, 1, '2013-05-06 09:26:21', '40341ebc-b61e-11e2-a9db-0024be7f1be1', 175, NULL, '2013-05-06 09:26:21', 0, NULL)[0m
  [4;36;1mSQL (56.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3008/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 251ms (DB: 73) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-06 09:26:21) [POST]
  Parameters: {"program"=>"CHRONIC CARE MODULE", "encounter_type"=>"COMPLICATIONS ", "patient_id"=>"175", "concept"=>{"Test month "=>"", "Test day "=>"", "Complications"=>"Amputation", "Test year "=>""}, "user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mEncounterType Load (0.2ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'COMPLICATIONS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mEncounter Create (60.4ms)[0m   [0;1mINSERT INTO `encounter` (`creator`, `location_id`, `date_changed`, `changed_by`, `form_id`, `date_voided`, `encounter_type`, `provider_id`, `date_created`, `uuid`, `patient_id`, `voided_by`, `encounter_datetime`, `voided`, `void_reason`) VALUES(1, 721, NULL, NULL, NULL, NULL, 31, 1, '2013-05-06 09:26:22', '40689f0c-b61e-11e2-a9db-0024be7f1be1', 175, NULL, '2013-05-06 09:26:22', 0, NULL)[0m
  [4;35;1mSQL (67.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3008/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 377ms (DB: 129) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-06 09:26:22) [POST]
  Parameters: {"program"=>"CHRONIC CARE MODULE", "encounter_type"=>"COMPLICATIONS ", "patient_id"=>"175", "concept"=>{"Test month "=>"", "Test day "=>"", "Complications"=>"Amputation", "Test year "=>""}, "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mEncounterType Load (0.2ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'COMPLICATIONS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mEncounter Create (47.6ms)[0m   [0mINSERT INTO `encounter` (`creator`, `location_id`, `date_changed`, `changed_by`, `form_id`, `date_voided`, `encounter_type`, `provider_id`, `date_created`, `uuid`, `patient_id`, `voided_by`, `encounter_datetime`, `voided`, `void_reason`) VALUES(1, 721, NULL, NULL, NULL, NULL, 31, 1, '2013-05-06 09:26:22', '40a66d9d-b61e-11e2-a9db-0024be7f1be1', 175, NULL, '2013-05-06 09:26:22', 0, NULL)[0m
  [4;36;1mSQL (76.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3008/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 375ms (DB: 125) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-06 09:26:22) [POST]
  Parameters: {"program"=>"CHRONIC CARE MODULE", "encounter_type"=>"COMPLICATIONS ", "patient_id"=>"175", "concept"=>{"Test month "=>"", "Test day "=>"", "Complications"=>"Amputation", "Test year "=>""}, "user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mEncounterType Load (0.2ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'COMPLICATIONS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mEncounter Create (0.8ms)[0m   [0;1mINSERT INTO `encounter` (`creator`, `location_id`, `date_changed`, `changed_by`, `form_id`, `date_voided`, `encounter_type`, `provider_id`, `date_created`, `uuid`, `patient_id`, `voided_by`, `encounter_datetime`, `voided`, `void_reason`) VALUES(1, 721, NULL, NULL, NULL, NULL, 31, 1, '2013-05-06 09:26:22', '40ec08e5-b61e-11e2-a9db-0024be7f1be1', 175, NULL, '2013-05-06 09:26:22', 0, NULL)[0m
  [4;35;1mSQL (57.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3008/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 366ms (DB: 60) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-06 09:26:23) [POST]
  Parameters: {"program"=>"CHRONIC CARE MODULE", "encounter_type"=>"COMPLICATIONS ", "patient_id"=>"175", "concept"=>{"Test month "=>"", "Test day "=>"", "Complications"=>"Amputation", "Test year "=>""}, "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'COMPLICATIONS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mEncounter Create (0.5ms)[0m   [0mINSERT INTO `encounter` (`creator`, `location_id`, `date_changed`, `changed_by`, `form_id`, `date_voided`, `encounter_type`, `provider_id`, `date_created`, `uuid`, `patient_id`, `voided_by`, `encounter_datetime`, `voided`, `void_reason`) VALUES(1, 721, NULL, NULL, NULL, NULL, 31, 1, '2013-05-06 09:26:23', '411e9b3a-b61e-11e2-a9db-0024be7f1be1', 175, NULL, '2013-05-06 09:26:23', 0, NULL)[0m
  [4;36;1mSQL (105.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3008/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 356ms (DB: 107) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-06 09:26:23) [POST]
  Parameters: {"program"=>"CHRONIC CARE MODULE", "encounter_type"=>"COMPLICATIONS ", "patient_id"=>"175", "concept"=>{"Test month "=>"", "Test day "=>"", "Complications"=>"Amputation", "Test year "=>""}, "user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'COMPLICATIONS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mEncounter Create (0.5ms)[0m   [0;1mINSERT INTO `encounter` (`creator`, `location_id`, `date_changed`, `changed_by`, `form_id`, `date_voided`, `encounter_type`, `provider_id`, `date_created`, `uuid`, `patient_id`, `voided_by`, `encounter_datetime`, `voided`, `void_reason`) VALUES(1, 721, NULL, NULL, NULL, NULL, 31, 1, '2013-05-06 09:26:23', '4157c4ad-b61e-11e2-a9db-0024be7f1be1', 175, NULL, '2013-05-06 09:26:23', 0, NULL)[0m
  [4;35;1mSQL (42.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3008/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 288ms (DB: 44) | 302 Found [http://0.0.0.0/encounters/create]


Processing EncountersController#create (for 127.0.0.1 at 2013-05-06 09:26:23) [POST]
  Parameters: {"program"=>"CHRONIC CARE MODULE", "encounter_type"=>"COMPLICATIONS ", "patient_id"=>"175", "concept"=>{"Test month "=>"", "Test day "=>"", "Complications"=>"Amputation", "Test year "=>""}, "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'COMPLICATIONS ') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mEncounter Create (74.2ms)[0m   [0mINSERT INTO `encounter` (`creator`, `location_id`, `date_changed`, `changed_by`, `form_id`, `date_voided`, `encounter_type`, `provider_id`, `date_created`, `uuid`, `patient_id`, `voided_by`, `encounter_datetime`, `voided`, `void_reason`) VALUES(1, 721, NULL, NULL, NULL, NULL, 31, 1, '2013-05-06 09:26:23', '4187c1f7-b61e-11e2-a9db-0024be7f1be1', 175, NULL, '2013-05-06 09:26:23', 0, NULL)[0m
  [4;36;1mSQL (45.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'CHRONIC CARE MODULE') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
Redirected to http://0.0.0.0:3008/encounters/missing_program?program=CHRONIC CARE MODULE
Completed in 366ms (DB: 121) | 302 Found [http://0.0.0.0/encounters/create]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 09:30:01) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 243ms (View: 135, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 09:30:02) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 161ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 10:11:40) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mUserProperty Load (0.1ms)[0m   [0mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 258ms (View: 148, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 10:11:40) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mProgramEncounter Load (0.5ms)[0m   [0mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 99ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing ProtocolPatientsController#treatment (for 127.0.0.1 at 2013-05-06 10:11:44) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (4.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/treatment
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 253ms (View: 37, DB: 5) | 200 OK [http://0.0.0.0/protocol_patients/treatment?patient_id=175&user_id=1]


Processing ProtocolPatientsController#treatment (for 127.0.0.1 at 2013-05-06 10:13:24) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (3.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/treatment
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 190ms (View: 49, DB: 5) | 200 OK [http://0.0.0.0/protocol_patients/treatment?patient_id=175&user_id=1]


Processing ProtocolPatientsController#treatment (for 127.0.0.1 at 2013-05-06 10:14:48) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/treatment
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 177ms (View: 24, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/treatment?patient_id=175&user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 10:29:00) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 256ms (View: 70, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 10:29:01) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 162ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing ProtocolPatientsController#treatment (for 127.0.0.1 at 2013-05-06 10:29:04) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/treatment
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 121ms (View: 24, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/treatment?patient_id=175&user_id=1]


Processing ProtocolPatientsController#treatment (for 127.0.0.1 at 2013-05-06 10:30:10) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/treatment
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 165ms (View: 16, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/treatment?patient_id=175&user_id=1]


Processing ProtocolPatientsController#treatment (for 127.0.0.1 at 2013-05-06 10:30:29) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/treatment
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 148ms (View: 31, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/treatment?patient_id=175&user_id=1]


Processing ProtocolPatientsController#treatment (for 127.0.0.1 at 2013-05-06 10:32:13) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/treatment
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 120ms (View: 25, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/treatment?patient_id=175&user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 10:34:36) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mUserProperty Load (0.1ms)[0m   [0mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 248ms (View: 73, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 10:34:36) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mProgramEncounter Load (0.6ms)[0m   [0mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 90ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing ProtocolPatientsController#treatment (for 127.0.0.1 at 2013-05-06 10:34:40) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/treatment
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 259ms (View: 26, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/treatment?patient_id=175&user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 11:54:48) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 534ms (View: 159, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 11:54:51) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (90.3ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 232ms (View: 1, DB: 91) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 12:12:21) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mUserProperty Load (0.1ms)[0m   [0mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;36;1mPerson Load (2.5ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.3ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (5.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAddress Load (2.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 782ms (View: 289, DB: 16) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 12:12:22) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mProgramEncounter Load (113.0ms)[0m   [0mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 261ms (View: 1, DB: 113) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing ProtocolPatientsController#assessment (for 127.0.0.1 at 2013-05-06 12:12:30) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/assessment
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 244ms (View: 25, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/assessment?patient_id=175&user_id=1]


Processing ProtocolPatientsController#assessment (for 127.0.0.1 at 2013-05-06 12:14:15) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/assessment
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 113ms (View: 23, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/assessment?patient_id=175&user_id=1]


Processing ProtocolPatientsController#assessment (for 127.0.0.1 at 2013-05-06 12:18:06) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/assessment
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 113ms (View: 19, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/assessment?patient_id=175&user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 12:19:12) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 317ms (View: 81, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 12:19:12) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (1.8ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 167ms (View: 1, DB: 2) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing ProtocolPatientsController#outcomes (for 127.0.0.1 at 2013-05-06 12:19:22) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/outcomes
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 130ms (View: 22, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/outcomes?patient_id=175&user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 12:19:28) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mUserProperty Load (0.1ms)[0m   [0mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 252ms (View: 146, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 12:19:29) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mProgramEncounter Load (0.5ms)[0m   [0mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 99ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing ProtocolPatientsController#treatment (for 127.0.0.1 at 2013-05-06 12:20:13) [GET]
  Parameters: {"patient_id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/treatment
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 116ms (View: 25, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/treatment?patient_id=175&user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 12:20:16) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 364ms (View: 90, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 12:20:17) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 181ms (View: 3, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing PatientsController#visit_history (for 127.0.0.1 at 2013-05-06 12:20:20) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (38.9ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) ORDER BY date_time DESC[0m
Rendering patients/visit_history
Completed in 155ms (View: 23, DB: 39) | 200 OK [http://0.0.0.0/patients/visit_history/175?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 12:20:22) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 107ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing PatientsController#visit_history (for 127.0.0.1 at 2013-05-06 12:20:23) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) ORDER BY date_time DESC[0m
Rendering patients/visit_history
Completed in 97ms (View: 1, DB: 0) | 200 OK [http://0.0.0.0/patients/visit_history/175?user_id=1]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 12:20:33) [GET]
  Parameters: {"user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 192ms (View: 45, DB: 1) | 200 OK [http://0.0.0.0/clinic?user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 12:20:34) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/overview
Completed in 60ms (View: 1, DB: 0) | 200 OK [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 12:20:46) [GET]
  Parameters: {"location_id"=>"721", "id"=>"174", "user_id"=>"1"}
  [4;36;1mPatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 324ms (View: 75, DB: 2) | 200 OK [http://0.0.0.0/patients/show/174?user_id=1&location_id=721]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 12:20:47) [GET]
  Parameters: {"id"=>"174", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.6ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 174) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 174)) [0m
Rendering patients/current_visit
Completed in 176ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/174?user_id=1]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 12:50:03) [GET]
  Parameters: {"user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 534ms (View: 79, DB: 1) | 200 OK [http://0.0.0.0/clinic?user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 12:50:05) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/overview
Completed in 92ms (View: 23, DB: 0) | 200 OK [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing ClinicController#reports (for 127.0.0.1 at 2013-05-06 12:50:07) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/reports
Completed in 76ms (View: 10, DB: 0) | 200 OK [http://0.0.0.0/reports?user_id=1&location_id=721]


Processing ClinicController#my_account (for 127.0.0.1 at 2013-05-06 12:50:09) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/my_account
Completed in 88ms (View: 31, DB: 0) | 200 OK [http://0.0.0.0/my_account?user_id=1&location_id=721]


Processing ClinicController#administration (for 127.0.0.1 at 2013-05-06 12:50:11) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/administration
Completed in 104ms (View: 34, DB: 0) | 200 OK [http://0.0.0.0/administration?user_id=1&location_id=721]


Processing ClinicController#project_users (for 127.0.0.1 at 2013-05-06 12:50:11) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/project_users
Completed in 101ms (View: 34, DB: 0) | 200 OK [http://0.0.0.0/project_users?user_id=1&location_id=721]


Processing ClinicController#project_users_list (for 127.0.0.1 at 2013-05-06 12:50:11) [GET]
  Parameters: {"user_id"=>"1", "username"=>""}
  [4;35;1mUserProperty Load (0.6ms)[0m   [0mSELECT * FROM `user_property` WHERE (property = 'Status' AND property_value = 'ACTIVE') [0m
  [4;36;1mUser Load (64.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (username LIKE '%' AND user_id IN (1)) AND (users.retired = 0) LIMIT 50[0m
  [4;35;1mUserProperty Load (2.5ms)[0m   [0mSELECT * FROM `user_property` WHERE (`user_property`.`property` = 'chronic.care.clinic.activities') AND (`user_property`.`user_id` = 1) LIMIT 1[0m
  [4;36;1mUserProperty Load (3.5ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`property` = 'Last Name') AND (`user_property`.`user_id` = 1) LIMIT 1[0m
  [4;35;1mUserProperty Load (0.5ms)[0m   [0mSELECT * FROM `user_property` WHERE (`user_property`.`property` = 'First Name') AND (`user_property`.`user_id` = 1) LIMIT 1[0m
Completed in 121ms (View: 1, DB: 72) | 200 OK [http://0.0.0.0/project_users_list?user_id=1&username=]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 12:50:13) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/overview
Completed in 62ms (View: 1, DB: 0) | 200 OK [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 12:50:24) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1", "id"=>"174"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 551ms (View: 287, DB: 2) | 200 OK [http://0.0.0.0/patients/show/174?user_id=1&location_id=721]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 12:50:25) [GET]
  Parameters: {"user_id"=>"1", "id"=>"174"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (39.7ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 174) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 174)) [0m
Rendering patients/current_visit
Completed in 329ms (View: 26, DB: 40) | 200 OK [http://0.0.0.0/patients/current_visit/174?user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 13:01:10) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1", "id"=>"174"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mUserProperty Load (0.1ms)[0m   [0mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 342ms (View: 227, DB: 2) | 200 OK [http://0.0.0.0/patients/show/174?user_id=1&location_id=721]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 13:01:11) [GET]
  Parameters: {"user_id"=>"1", "id"=>"174"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;35;1mProgramEncounter Load (0.6ms)[0m   [0mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 174) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 174)) [0m
Rendering patients/current_visit
Completed in 124ms (View: 7, DB: 4) | 200 OK [http://0.0.0.0/patients/current_visit/174?user_id=1]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:02:03) [GET]
  Parameters: {"user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/clinic
Rendering clinic/index

ActionView::TemplateError (undefined local variable or method `current_user' for #<ActionView::Base:0xb613de84>) on line #8 of app/views/layouts/clinic.html.erb:
5:     <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
6:     <title><%= @title = "#{controller.controller_name.humanize} #{controller.action_name.humanize}" rescue ""  %></title>
7:     <script language="javascript">
8:       tstUsername = "<%= current_user.username unless current_user.nil? %>";
9:       tstCurrentDate = "<%= Time.now.strftime("%Y-%m-%d") %>";
10:       var tt_cancel_destination = null;
11:     </script>

    app/views/layouts/clinic.html.erb:8
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (46.4ms)
Rendered rescues/_request_and_response (8.1ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:08:10) [GET]
  Parameters: {"user_id"=>"1"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/clinic
Rendering clinic/index

ActionView::TemplateError (undefined local variable or method `current_user' for #<ActionView::Base:0xb61de6a4>) on line #8 of app/views/layouts/clinic.html.erb:
5:     <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
6:     <title><%= @title = "#{controller.controller_name.humanize} #{controller.action_name.humanize}" rescue ""  %></title>
7:     <script language="javascript">
8:       tstUsername = "<%= current_user.username unless current_user.nil? %>";
9:       tstCurrentDate = "<%= Time.now.strftime("%Y-%m-%d") %>";
10:       var tt_cancel_destination = null;
11:     </script>

    app/views/layouts/clinic.html.erb:8
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (128.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:08:12) [GET]
  Parameters: {"user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/clinic
Rendering clinic/index

ActionView::TemplateError (undefined local variable or method `current_user' for #<ActionView::Base:0xb6358570>) on line #8 of app/views/layouts/clinic.html.erb:
5:     <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
6:     <title><%= @title = "#{controller.controller_name.humanize} #{controller.action_name.humanize}" rescue ""  %></title>
7:     <script language="javascript">
8:       tstUsername = "<%= current_user.username unless current_user.nil? %>";
9:       tstCurrentDate = "<%= Time.now.strftime("%Y-%m-%d") %>";
10:       var tt_cancel_destination = null;
11:     </script>

    app/views/layouts/clinic.html.erb:8
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (41.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:08:13) [GET]
  Parameters: {"user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/clinic
Rendering clinic/index

ActionView::TemplateError (undefined local variable or method `current_user' for #<ActionView::Base:0xb65df71c>) on line #8 of app/views/layouts/clinic.html.erb:
5:     <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
6:     <title><%= @title = "#{controller.controller_name.humanize} #{controller.action_name.humanize}" rescue ""  %></title>
7:     <script language="javascript">
8:       tstUsername = "<%= current_user.username unless current_user.nil? %>";
9:       tstCurrentDate = "<%= Time.now.strftime("%Y-%m-%d") %>";
10:       var tt_cancel_destination = null;
11:     </script>

    app/views/layouts/clinic.html.erb:8
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (40.3ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:08:14) [GET]
  Parameters: {"user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/clinic
Rendering clinic/index

ActionView::TemplateError (undefined local variable or method `current_user' for #<ActionView::Base:0xb6c99a80>) on line #8 of app/views/layouts/clinic.html.erb:
5:     <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
6:     <title><%= @title = "#{controller.controller_name.humanize} #{controller.action_name.humanize}" rescue ""  %></title>
7:     <script language="javascript">
8:       tstUsername = "<%= current_user.username unless current_user.nil? %>";
9:       tstCurrentDate = "<%= Time.now.strftime("%Y-%m-%d") %>";
10:       var tt_cancel_destination = null;
11:     </script>

    app/views/layouts/clinic.html.erb:8
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (44.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ProtocolPatientsController#treatment (for 127.0.0.1 at 2013-05-06 13:08:30) [GET]
  Parameters: {"patient_id"=>"174", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering protocol_patients/treatment
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 126ms (View: 37, DB: 1) | 200 OK [http://0.0.0.0/protocol_patients/treatment?patient_id=174&user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 13:08:34) [GET]
  Parameters: {"user_id"=>"1", "id"=>"174"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mUserProperty Load (0.1ms)[0m   [0mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 253ms (View: 70, DB: 2) | 200 OK [http://0.0.0.0/patients/show/174?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 13:08:35) [GET]
  Parameters: {"user_id"=>"1", "id"=>"174"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;35;1mProgramEncounter Load (0.4ms)[0m   [0mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 174) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 174)) [0m
Rendering patients/current_visit
Completed in 191ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/174?user_id=1]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 13:08:45) [GET]
  Parameters: {"user_id"=>"1", "id"=>"174"}
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 191ms (View: 80, DB: 2) | 200 OK [http://0.0.0.0/patients/show/174?user_id=1]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 13:08:46) [GET]
  Parameters: {"user_id"=>"1", "id"=>"174"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.6ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 174) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 174)) [0m
Rendering patients/current_visit
Completed in 139ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/174?user_id=1]


Processing PatientsController#visit_history (for 127.0.0.1 at 2013-05-06 13:08:48) [GET]
  Parameters: {"user_id"=>"1", "id"=>"174"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 174) ORDER BY date_time DESC[0m
Rendering patients/visit_history
Completed in 178ms (View: 5, DB: 1) | 200 OK [http://0.0.0.0/patients/visit_history/174?user_id=1]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:08:55) [GET]
  Parameters: {"user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/clinic
Rendering clinic/index

ActionView::TemplateError (undefined local variable or method `current_user' for #<ActionView::Base:0xb6c95f20>) on line #8 of app/views/layouts/clinic.html.erb:
5:     <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
6:     <title><%= @title = "#{controller.controller_name.humanize} #{controller.action_name.humanize}" rescue ""  %></title>
7:     <script language="javascript">
8:       tstUsername = "<%= current_user.username unless current_user.nil? %>";
9:       tstCurrentDate = "<%= Time.now.strftime("%Y-%m-%d") %>";
10:       var tt_cancel_destination = null;
11:     </script>

    app/views/layouts/clinic.html.erb:8
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (44.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:09:18) [GET]
Redirected to http://0.0.0.0:3009/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 51ms (DB: 0) | 302 Found [http://0.0.0.0/clinic]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 13:09:18) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=0.0.0.0:3009
Completed in 6ms (DB: 0) | 302 Found [http://0.0.0.0/user_login?internal=true]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:09:35) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/clinic
Rendering clinic/index

ActionView::TemplateError (undefined local variable or method `current_user' for #<ActionView::Base:0xb6beef7c>) on line #8 of app/views/layouts/clinic.html.erb:
5:     <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
6:     <title><%= @title = "#{controller.controller_name.humanize} #{controller.action_name.humanize}" rescue ""  %></title>
7:     <script language="javascript">
8:       tstUsername = "<%= current_user.username unless current_user.nil? %>";
9:       tstCurrentDate = "<%= Time.now.strftime("%Y-%m-%d") %>";
10:       var tt_cancel_destination = null;
11:     </script>

    app/views/layouts/clinic.html.erb:8
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (45.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:12:20) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 110ms (View: 8, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:13:36) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (8.8ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 310ms (View: 16, DB: 10) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:17:36) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 163ms (View: 8, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#user_logout (for 127.0.0.1 at 2013-05-06 13:17:46) [GET]
  Parameters: {"location_id"=>"721", "id"=>"1"}
Redirected to http://localhost:3004/logout/1?ext=true&src=0.0.0.0:3009
Completed in 8ms (DB: 0) | 302 Found [http://0.0.0.0/user_logout/1?location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:17:47) [GET]
Redirected to http://0.0.0.0:3009/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 40ms (DB: 0) | 302 Found [http://0.0.0.0/clinic]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 13:17:47) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=0.0.0.0:3009
Completed in 7ms (DB: 0) | 302 Found [http://0.0.0.0/user_login?internal=true]


Processing ClinicController#reports (for 127.0.0.1 at 2013-05-06 13:18:00) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Redirected to http://0.0.0.0:3009/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 79ms (DB: 0) | 302 Found [http://0.0.0.0/reports?user_id=1&location_id=721]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 13:18:00) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=0.0.0.0:3009
Completed in 6ms (DB: 0) | 302 Found [http://0.0.0.0/user_login?internal=true]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 13:18:02) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Redirected to http://0.0.0.0:3009/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 140ms (DB: 0) | 302 Found [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 13:18:03) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=0.0.0.0:3009
Completed in 7ms (DB: 0) | 302 Found [http://0.0.0.0/user_login?internal=true]


Processing ClinicController#user_logout (for 127.0.0.1 at 2013-05-06 13:18:17) [GET]
  Parameters: {"location_id"=>"721", "id"=>"1"}
Redirected to http://localhost:3004/logout/1?ext=true&src=0.0.0.0:3009
Completed in 46ms (DB: 39) | 302 Found [http://0.0.0.0/user_logout/1?location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:18:34) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.3ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 90ms (View: 9, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:19:18) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 170ms (View: 9, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:19:21) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (6.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (4.4ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 180ms (View: 13, DB: 18) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#user_logout (for 127.0.0.1 at 2013-05-06 13:20:08) [GET]
  Parameters: {"location_id"=>"721", "id"=>"1"}
Redirected to http://localhost:3004/logout/1?ext=true&src=0.0.0.0:3009
Completed in 7ms (DB: 0) | 302 Found [http://0.0.0.0/user_logout/1?location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:20:08) [GET]
Redirected to http://0.0.0.0:3009/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 35ms (DB: 0) | 302 Found [http://0.0.0.0/]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 13:20:08) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=0.0.0.0:3009
Completed in 8ms (DB: 0) | 302 Found [http://0.0.0.0/user_login?internal=true]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:20:21) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 293ms (View: 9, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:20:45) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 103ms (View: 9, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:21:12) [GET]
  Parameters: {"location_id"=>"721", "ext_patient_id"=>"175", "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://0.0.0.0:3009/patients/show/175?user_id=1&location_id=721
Completed in 141ms (DB: 0) | 302 Found [http://0.0.0.0/?user_id=1&location_id=721&ext_patient_id=175]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 13:21:13) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1", "id"=>"175"}
  [4;36;1mPatient Load (4.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.4ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 273ms (View: 77, DB: 8) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1&location_id=721]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 13:21:13) [GET]
  Parameters: {"user_id"=>"1", "id"=>"175"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 96ms (View: 1, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing PatientsController#visit_history (for 127.0.0.1 at 2013-05-06 13:21:16) [GET]
  Parameters: {"user_id"=>"1", "id"=>"175"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.2ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) ORDER BY date_time DESC[0m
Rendering patients/visit_history
Completed in 208ms (View: 12, DB: 0) | 200 OK [http://0.0.0.0/patients/visit_history/175?user_id=1]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:21:18) [GET]
  Parameters: {"user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 93ms (View: 11, DB: 1) | 200 OK [http://0.0.0.0/clinic?user_id=1]


Processing ClinicController#user_logout (for 127.0.0.1 at 2013-05-06 13:23:33) [GET]
  Parameters: {"location_id"=>"721", "id"=>"1"}
Redirected to http://localhost:3004/logout/1?ext=true&src=0.0.0.0:3009
Completed in 8ms (DB: 0) | 302 Found [http://0.0.0.0/user_logout/1?location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:23:33) [GET]
Redirected to http://0.0.0.0:3009/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 38ms (DB: 0) | 302 Found [http://0.0.0.0/]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 13:23:33) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=0.0.0.0:3009
Completed in 7ms (DB: 0) | 302 Found [http://0.0.0.0/user_login?internal=true]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:24:41) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (2.4ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 103ms (View: 17, DB: 4) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:25:20) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 87ms (View: 8, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:27:52) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}

RuntimeError (--- !map:HashWithIndifferentAccess 
location_id: "721"
controller: clinic
user_id: "1"
action: index
):
  app/controllers/clinic_controller.rb:5:in `index'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (111.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:33:47) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}

RuntimeError ({"location_id"=>"721", "controller"=>"clinic", "user_id"=>"1", "action"=>"index"}):
  app/controllers/clinic_controller.rb:5:in `index'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (36.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:33:49) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}

RuntimeError ({"location_id"=>"721", "controller"=>"clinic", "user_id"=>"1", "action"=>"index"}):
  app/controllers/clinic_controller.rb:5:in `index'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:44:13) [GET]
  Parameters: {"user_id"=>"1"}

RuntimeError ({"controller"=>"clinic", "user_id"=>"1", "action"=>"index"}):
  app/controllers/clinic_controller.rb:5:in `index'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (124.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:44:45) [GET]
  Parameters: {"user_id"=>"1"}
Redirected to http://0.0.0.0:3009user/programs
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Completed in 88ms (DB: 1) | 302 Found [http://0.0.0.0/clinic?user_id=1]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:44:45) [GET]
  Parameters: {"user_id"=>"1"}
Redirected to http://0.0.0.0:3009user/programs
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Completed in 83ms (DB: 0) | 302 Found [http://0.0.0.0/clinic?user_id=1]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:45:21) [GET]
  Parameters: {"user_id"=>"1"}
Redirected to http://0.0.0.0:3009user/programs
Completed in 63ms (DB: 0) | 302 Found [http://0.0.0.0/clinic?user_id=1]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:45:30) [GET]
  Parameters: {"user_id"=>"1"}
Redirected to http://0.0.0.0:3009user/programs
Completed in 135ms (DB: 0) | 302 Found [http://0.0.0.0/clinic?user_id=1]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:45:37) [GET]
  Parameters: {"user_id"=>"1"}
Redirected to http://0.0.0.0:3009user/programs
Completed in 58ms (DB: 0) | 302 Found [http://0.0.0.0/clinic?user_id=1]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:47:47) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Redirected to http://0.0.0.0:3009user/programs
Completed in 59ms (DB: 0) | 302 Found [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 13:48:17) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 89ms (View: 9, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:01:28) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}

RuntimeError (yes):
  app/controllers/clinic_controller.rb:37:in `programs'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.9ms)
Rendered rescues/_request_and_response (4.5ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:03:32) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}

RuntimeError (here):
  app/controllers/clinic_controller.rb:40:in `programs'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (34.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:06:54) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 82ms (View: 25, DB: 0) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:08:12) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 159ms (View: 101, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:09:13) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 83ms (View: 20, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:09:29) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 147ms (View: 22, DB: 0) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:12:37) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 80ms (View: 17, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 14:12:40) [POST]
  Parameters: {"program"=>"HYPERTENSION PROGRAM", "user_id"=>""}

ActionController::RoutingError (No route matches "/user/programs" with {:method=>:post}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:13:10) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 154ms (View: 97, DB: 0) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:13:12) [POST]
  Parameters: {"program"=>"DM PROGRAM", "user_id"=>""}
Redirected to http://0.0.0.0:3009/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 37ms (DB: 0) | 302 Found [http://0.0.0.0/clinic/programs]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 14:13:12) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=0.0.0.0:3009
Completed in 6ms (DB: 0) | 302 Found [http://0.0.0.0/user_login?internal=true]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:13:29) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 72ms (View: 17, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:14:47) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}

RuntimeError (--- !map:HashWithIndifferentAccess 
location_id: "721"
controller: clinic
user_id: "1"
action: programs
):
  app/controllers/clinic_controller.rb:37:in `programs'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (112.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:20:48) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 151ms (View: 23, DB: 0) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:20:52) [POST]
  Parameters: {"program"=>"ASTHMA PROGRAM", "location_id"=>"721", "user_id"=>"1"}
Redirected to http://0.0.0.0:3009/clinic?location_id=721&user_id=1
Completed in 60ms (DB: 0) | 302 Found [http://0.0.0.0/clinic/programs]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 14:20:52) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 83ms (View: 8, DB: 1) | 200 OK [http://0.0.0.0/clinic?location_id=721&user_id=1]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:23:55) [GET]
Redirected to http://0.0.0.0:3012/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 146ms (DB: 0) | 302 Found [http://0.0.0.0/]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 14:23:55) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=0.0.0.0:3012
Completed in 8ms (DB: 0) | 302 Found [http://0.0.0.0/user_login?internal=true]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:24:09) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 166ms (View: 40, DB: 0) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:24:12) [POST]
  Parameters: {"location_id"=>"721", "program"=>"HYPERTENSION PROGRAM", "user_id"=>"1"}
Redirected to http://0.0.0.0:3012/clinic?location_id=721&user_id=1
Completed in 74ms (DB: 0) | 302 Found [http://0.0.0.0/clinic/programs]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 14:24:12) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 96ms (View: 14, DB: 1) | 200 OK [http://0.0.0.0/clinic?location_id=721&user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 14:24:13) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/overview
Completed in 66ms (View: 6, DB: 0) | 200 OK [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:24:25) [POST]
  Parameters: {"location_id"=>"721", "program"=>"ASTHMA PROGRAM", "user_id"=>"1"}
Redirected to http://0.0.0.0:3012/clinic?location_id=721&user_id=1
Completed in 64ms (DB: 0) | 302 Found [http://0.0.0.0/clinic/programs]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 14:24:25) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 155ms (View: 7, DB: 1) | 200 OK [http://0.0.0.0/clinic?location_id=721&user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 14:24:26) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/overview
Completed in 58ms (View: 1, DB: 0) | 200 OK [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing ClinicController#my_account (for 127.0.0.1 at 2013-05-06 14:24:41) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/my_account
Completed in 95ms (View: 10, DB: 0) | 200 OK [http://0.0.0.0/my_account?user_id=1&location_id=721]


Processing ClinicController#reports (for 127.0.0.1 at 2013-05-06 14:24:43) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/reports
Completed in 65ms (View: 5, DB: 0) | 200 OK [http://0.0.0.0/reports?user_id=1&location_id=721]


Processing ClinicController#administration (for 127.0.0.1 at 2013-05-06 14:24:45) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/administration
Completed in 132ms (View: 8, DB: 1) | 200 OK [http://0.0.0.0/administration?user_id=1&location_id=721]


Processing ClinicController#project_users (for 127.0.0.1 at 2013-05-06 14:24:46) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/project_users
Completed in 77ms (View: 10, DB: 0) | 200 OK [http://0.0.0.0/project_users?user_id=1&location_id=721]


Processing ClinicController#project_users_list (for 127.0.0.1 at 2013-05-06 14:24:46) [GET]
  Parameters: {"user_id"=>"1", "username"=>""}
  [4;36;1mUserProperty Load (1.2ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (property = 'Status' AND property_value = 'ACTIVE') [0m
  [4;35;1mUser Load (6.9ms)[0m   [0mSELECT * FROM `users` WHERE (username LIKE '%' AND user_id IN (1)) AND (users.retired = 0) LIMIT 50[0m
  [4;36;1mUserProperty Load (0.4ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`property` = 'chronic.care.clinic.activities') AND (`user_property`.`user_id` = 1) LIMIT 1[0m
  [4;35;1mUserProperty Load (0.6ms)[0m   [0mSELECT * FROM `user_property` WHERE (`user_property`.`property` = 'Last Name') AND (`user_property`.`user_id` = 1) LIMIT 1[0m
  [4;36;1mUserProperty Load (0.4ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`property` = 'First Name') AND (`user_property`.`user_id` = 1) LIMIT 1[0m
Completed in 121ms (View: 1, DB: 10) | 200 OK [http://0.0.0.0/project_users_list?user_id=1&username=]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 14:24:47) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/overview
Completed in 71ms (View: 1, DB: 0) | 200 OK [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 14:26:36) [GET]
  Parameters: {"location_id"=>"721", "ext_patient_id"=>"175", "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://0.0.0.0:3012/patients/show/175?user_id=1&location_id=721
Completed in 172ms (DB: 1) | 302 Found [http://0.0.0.0/clinic?location_id=721&user_id=1&ext_patient_id=175]


Processing PatientsController#show (for 127.0.0.1 at 2013-05-06 14:26:37) [GET]
  Parameters: {"location_id"=>"721", "id"=>"175", "user_id"=>"1"}
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mUserProperty Load (0.4ms)[0m   [0;1mSELECT * FROM `user_property` WHERE (`user_property`.`user_id` = '1' AND `user_property`.`property` = 'chronic.care.clinic.activities') LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/show
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 175 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 175 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 175 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 175 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 781ms (View: 546, DB: 2) | 200 OK [http://0.0.0.0/patients/show/175?user_id=1&location_id=721]


Processing PatientsController#current_visit (for 127.0.0.1 at 2013-05-06 14:26:38) [GET]
  Parameters: {"id"=>"175", "user_id"=>"1"}
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 175) AND (patient.voided = 0) [0m
  [4;36;1mProgramEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `program_encounter` WHERE (`program_encounter`.`patient_id` = 175) AND ((DATE(date_time) = CURRENT_DATE()) AND (`program_encounter`.`patient_id` = 175)) [0m
Rendering patients/current_visit
Completed in 123ms (View: 11, DB: 1) | 200 OK [http://0.0.0.0/patients/current_visit/175?user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 14:32:35) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/overview
Completed in 121ms (View: 1, DB: 0) | 200 OK [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 14:32:39) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 177ms (View: 8, DB: 1) | 200 OK [http://0.0.0.0/clinic?location_id=721&user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 14:32:40) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1"}
Rendering clinic/overview
Completed in 57ms (View: 1, DB: 0) | 200 OK [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 14:34:57) [GET]
  Parameters: {"location_id"=>"721", "ext_patient_id"=>"174", "user_id"=>"1"}

RuntimeError (here):
  app/controllers/clinic_controller.rb:5:in `index'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (32.6ms)
Rendered rescues/_request_and_response (1.4ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 14:35:23) [GET]
  Parameters: {"location_id"=>"721", "ext_patient_id"=>"174", "user_id"=>"1"}

RuntimeError (--- !map:HashWithIndifferentAccess 
controller: clinic
location_id: "721"
action: index
ext_patient_id: "174"
user_id: "1"
):
  app/controllers/clinic_controller.rb:5:in `index'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (104.2ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 14:47:24) [GET]
  Parameters: {"location_id"=>"721", "ext_patient_id"=>"174", "user_id"=>"1"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://0.0.0.0:3012/people/confirm/174?person_found_id=1&location_id=721&relation=none
Completed in 75ms (DB: 1) | 302 Found [http://0.0.0.0/clinic?location_id=721&user_id=1&ext_patient_id=174]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 14:47:24) [GET]
  Parameters: {"location_id"=>"721", "person_found_id"=>"1", "relation"=>"none"}

ActionController::RoutingError (No route matches "/people/confirm/174" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 14:48:49) [GET]
  Parameters: {"location_id"=>"721", "person_found_id"=>"1", "relation"=>"none"}

ActionController::RoutingError (No route matches "/people/confirm/174" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:52:41) [GET]
Redirected to http://0.0.0.0:3012/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 106ms (DB: 0) | 302 Found [http://0.0.0.0/]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 14:52:41) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=0.0.0.0:3012
Completed in 6ms (DB: 0) | 302 Found [http://0.0.0.0/user_login?internal=true]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:52:57) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 124ms (View: 65, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:53:01) [POST]
  Parameters: {"program"=>"HYPERTENSION PROGRAM", "user_id"=>"1", "location_id"=>"721"}
Redirected to http://0.0.0.0:3012/clinic?location_id=721&user_id=1
Completed in 62ms (DB: 1) | 302 Found [http://0.0.0.0/clinic/programs]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 14:53:01) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 167ms (View: 83, DB: 1) | 200 OK [http://0.0.0.0/clinic?location_id=721&user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 14:53:02) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering clinic/overview
Completed in 65ms (View: 6, DB: 0) | 200 OK [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 14:53:23) [GET]
  Parameters: {"ext_patient_id"=>"174", "user_id"=>"1", "location_id"=>"721"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://0.0.0.0:3012/people/confirm?found_person_id=1&location_id=721&relation=none
Completed in 80ms (DB: 1) | 302 Found [http://0.0.0.0/clinic?location_id=721&user_id=1&ext_patient_id=174]


Processing PeopleController#confirm (for 127.0.0.1 at 2013-05-06 14:53:23) [GET]
  Parameters: {"relation"=>"none", "location_id"=>"721", "found_person_id"=>"1"}
Redirected to http://0.0.0.0:3012/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 37ms (DB: 0) | 302 Found [http://0.0.0.0/people/confirm?found_person_id=1&location_id=721&relation=none]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 14:53:23) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=0.0.0.0:3012
Completed in 5ms (DB: 0) | 302 Found [http://0.0.0.0/user_login?internal=true]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:56:31) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 75ms (View: 16, DB: 1) | 200 OK [http://0.0.0.0/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 14:56:35) [POST]
  Parameters: {"program"=>"HYPERTENSION PROGRAM", "user_id"=>"1", "location_id"=>"721"}
Redirected to http://0.0.0.0:3012/clinic?location_id=721&user_id=1
Completed in 143ms (DB: 0) | 302 Found [http://0.0.0.0/clinic/programs]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 14:56:36) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 156ms (View: 11, DB: 1) | 200 OK [http://0.0.0.0/clinic?location_id=721&user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 14:56:36) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering clinic/overview
Completed in 66ms (View: 1, DB: 0) | 200 OK [http://0.0.0.0/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 14:57:12) [GET]
  Parameters: {"ext_patient_id"=>"174", "user_id"=>"1", "location_id"=>"721"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://0.0.0.0:3012/people/confirm?found_person_id=1&location_id=721
Completed in 82ms (DB: 1) | 302 Found [http://0.0.0.0/clinic?location_id=721&user_id=1&ext_patient_id=174]


Processing PeopleController#confirm (for 127.0.0.1 at 2013-05-06 14:57:14) [GET]
  Parameters: {"location_id"=>"721", "found_person_id"=>"1"}
Redirected to http://0.0.0.0:3012/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 39ms (DB: 0) | 302 Found [http://0.0.0.0/people/confirm?found_person_id=1&location_id=721]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 14:57:15) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=0.0.0.0:3012
Completed in 5ms (DB: 0) | 302 Found [http://0.0.0.0/user_login?internal=true]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 15:00:40) [GET]
Redirected to http://localhost:3012/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 35ms (DB: 0) | 302 Found [http://localhost/]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 15:00:40) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=localhost:3012
Completed in 9ms (DB: 0) | 302 Found [http://localhost/user_login?internal=true]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 15:00:55) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 129ms (View: 73, DB: 1) | 200 OK [http://localhost/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 15:01:00) [POST]
  Parameters: {"program"=>"HYPERTENSION PROGRAM", "user_id"=>"1", "location_id"=>"721"}
Redirected to http://localhost:3012/clinic?location_id=721&user_id=1
Completed in 139ms (DB: 0) | 302 Found [http://localhost/clinic/programs]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 15:01:01) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m

RuntimeError (--- !map:HashWithIndifferentAccess 
action: index
user_id: "1"
controller: clinic
location_id: "721"
):
  app/controllers/clinic_controller.rb:16:in `index'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (115.3ms)
Rendered rescues/_request_and_response (1.5ms)
Rendering rescues/layout (internal_server_error)


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 15:02:57) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 86ms (View: 10, DB: 1) | 200 OK [http://localhost/clinic?location_id=721&user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 15:02:57) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering clinic/overview
Completed in 66ms (View: 1, DB: 0) | 200 OK [http://localhost/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 15:03:16) [GET]
  Parameters: {"ext_patient_id"=>"174", "user_id"=>"1", "location_id"=>"721"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://localhost:3012/people/confirm?found_person_id=1&location_id=721
Completed in 79ms (DB: 1) | 302 Found [http://localhost/clinic?location_id=721&user_id=1&ext_patient_id=174]


Processing PeopleController#confirm (for 127.0.0.1 at 2013-05-06 15:03:17) [GET]
  Parameters: {"location_id"=>"721", "found_person_id"=>"1"}
Redirected to http://localhost:3012/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 35ms (DB: 0) | 302 Found [http://localhost/people/confirm?found_person_id=1&location_id=721]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 15:03:17) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=localhost:3012
Completed in 6ms (DB: 0) | 302 Found [http://localhost/user_login?internal=true]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 15:08:11) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 76ms (View: 18, DB: 1) | 200 OK [http://localhost/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 15:08:15) [POST]
  Parameters: {"program"=>"HYPERTENSION PROGRAM", "user_id"=>"1", "location_id"=>"721"}
Redirected to http://localhost:3012/clinic?location_id=721&user_id=1
Completed in 62ms (DB: 0) | 302 Found [http://localhost/clinic/programs]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 15:08:15) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 86ms (View: 8, DB: 1) | 200 OK [http://localhost/clinic?location_id=721&user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 15:08:16) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering clinic/overview
Completed in 115ms (View: 1, DB: 0) | 200 OK [http://localhost/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 15:08:46) [GET]
  Parameters: {"ext_patient_id"=>"174", "user_id"=>"1", "location_id"=>"721"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://localhost:3012/people/confirm?found_person_id=1&location_id=721&relation=
Completed in 152ms (DB: 1) | 302 Found [http://localhost/clinic?location_id=721&user_id=1&ext_patient_id=174]


Processing PeopleController#confirm (for 127.0.0.1 at 2013-05-06 15:08:46) [GET]
  Parameters: {"relation"=>"", "location_id"=>"721", "found_person_id"=>"1"}
Redirected to http://localhost:3012/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 35ms (DB: 0) | 302 Found [http://localhost/people/confirm?found_person_id=1&location_id=721&relation=]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 15:08:46) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=localhost:3012
Completed in 10ms (DB: 0) | 302 Found [http://localhost/user_login?internal=true]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 15:13:01) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 76ms (View: 18, DB: 1) | 200 OK [http://localhost/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 15:13:04) [POST]
  Parameters: {"program"=>"HYPERTENSION PROGRAM", "user_id"=>"1", "location_id"=>"721"}
Redirected to http://localhost:3012/clinic?location_id=721&user_id=1
Completed in 61ms (DB: 1) | 302 Found [http://localhost/clinic/programs]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 15:13:05) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 155ms (View: 11, DB: 1) | 200 OK [http://localhost/clinic?location_id=721&user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 15:13:05) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering clinic/overview
Completed in 62ms (View: 1, DB: 0) | 200 OK [http://localhost/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 15:13:23) [GET]
  Parameters: {"ext_patient_id"=>"174", "user_id"=>"1", "location_id"=>"721"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://localhost:3012/patients/confirm?found_person_id=1&location_id=721&relation=
Completed in 79ms (DB: 1) | 302 Found [http://localhost/clinic?location_id=721&user_id=1&ext_patient_id=174]


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:13:24) [GET]
  Parameters: {"relation"=>"", "location_id"=>"721", "found_person_id"=>"1"}
Redirected to http://localhost:3012/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 43ms (DB: 0) | 302 Found [http://localhost/patients/confirm?found_person_id=1&location_id=721&relation=]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 15:13:24) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=localhost:3012
Completed in 6ms (DB: 0) | 302 Found [http://localhost/user_login?internal=true]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 15:20:07) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 76ms (View: 17, DB: 1) | 200 OK [http://localhost/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 15:20:10) [POST]
  Parameters: {"program"=>"HYPERTENSION PROGRAM", "user_id"=>"1", "location_id"=>"721"}
Redirected to http://localhost:3012/clinic?location_id=721&user_id=1
Completed in 133ms (DB: 0) | 302 Found [http://localhost/clinic/programs]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 15:20:11) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 91ms (View: 8, DB: 1) | 200 OK [http://localhost/clinic?location_id=721&user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 15:20:11) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering clinic/overview
Completed in 56ms (View: 1, DB: 0) | 200 OK [http://localhost/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 15:20:34) [GET]
  Parameters: {"ext_patient_id"=>"174", "user_id"=>"1", "location_id"=>"721"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://localhost:3012/patients/confirm/ext_patient_id?found_person_id=174&location_id=721&user_id=1
Completed in 151ms (DB: 1) | 302 Found [http://localhost/clinic?location_id=721&user_id=1&ext_patient_id=174]


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:20:35) [GET]
  Parameters: {"id"=>"ext_patient_id", "user_id"=>"1", "location_id"=>"721", "found_person_id"=>"174"}

RuntimeError (here):
  app/controllers/patients_controller.rb:131:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (32.6ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:21:49) [GET]
  Parameters: {"id"=>"ext_patient_id", "user_id"=>"1", "location_id"=>"721", "found_person_id"=>"174"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m

NoMethodError (undefined method `main_next_task' for #<PatientsController:0xb60d6ef0>):
  app/controllers/patients_controller.rb:142:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (34.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:22:22) [GET]
  Parameters: {"id"=>"ext_patient_id", "user_id"=>"1", "location_id"=>"721", "found_person_id"=>"174"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m

NameError (uninitialized constant PatientsController::PatientService):
  app/controllers/patients_controller.rb:144:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (35.3ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:22:27) [GET]
  Parameters: {"id"=>"ext_patient_id", "user_id"=>"1", "location_id"=>"721", "found_person_id"=>"174"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m

NameError (uninitialized constant PatientsController::PatientService):
  app/controllers/patients_controller.rb:144:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (113.8ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:23:45) [GET]
  Parameters: {"id"=>"ext_patient_id", "user_id"=>"1", "location_id"=>"721", "found_person_id"=>"174"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m

NameError (uninitialized constant PatientsController::PatientService):
  app/controllers/patients_controller.rb:144:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:23:47) [GET]
  Parameters: {"id"=>"ext_patient_id", "user_id"=>"1", "location_id"=>"721", "found_person_id"=>"174"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m

NameError (uninitialized constant PatientsController::PatientService):
  app/controllers/patients_controller.rb:144:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (31.3ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:28:07) [GET]
  Parameters: {"found_person_id"=>"174", "location_id"=>"721", "id"=>"ext_patient_id", "user_id"=>"1"}
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m

NameError (uninitialized constant PatientService::CoreService):
  lib/patient_service.rb:2
  app/controllers/patients_controller.rb:144:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (105.9ms)
Rendered rescues/_request_and_response (1.5ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:29:33) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1", "found_person_id"=>"174", "id"=>"ext_patient_id"}
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.5ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m

ArgumentError (wrong number of arguments (0 for 1)):
  lib/patient_service.rb:1822:in `get_national_id'
  lib/patient_service.rb:1833:in `get_national_id_with_dashes'
  lib/patient_service.rb:1128:in `get_patient'
  app/controllers/patients_controller.rb:144:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (101.9ms)
Rendered rescues/_request_and_response (1.5ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:30:35) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1", "found_person_id"=>"174", "id"=>"ext_patient_id"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m

ArgumentError (wrong number of arguments (0 for 1)):
  lib/patient_service.rb:1822:in `get_national_id'
  lib/patient_service.rb:1833:in `get_national_id_with_dashes'
  lib/patient_service.rb:1128:in `get_patient'
  app/controllers/patients_controller.rb:144:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (113.3ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:30:37) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1", "found_person_id"=>"174", "id"=>"ext_patient_id"}
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m

ArgumentError (wrong number of arguments (0 for 1)):
  lib/patient_service.rb:1822:in `get_national_id'
  lib/patient_service.rb:1833:in `get_national_id_with_dashes'
  lib/patient_service.rb:1128:in `get_patient'
  app/controllers/patients_controller.rb:144:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (33.3ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:31:23) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1", "found_person_id"=>"174", "id"=>"ext_patient_id"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m

RuntimeError (here):
  app/controllers/patients_controller.rb:144:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:31:50) [GET]
  Parameters: {"location_id"=>"721", "user_id"=>"1", "found_person_id"=>"174", "id"=>"ext_patient_id"}
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m

ArgumentError (wrong number of arguments (0 for 1)):
  lib/patient_service.rb:1822:in `get_national_id'
  lib/patient_service.rb:1833:in `get_national_id_with_dashes'
  lib/patient_service.rb:1128:in `get_patient'
  app/controllers/patients_controller.rb:145:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (33.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:34:04) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m

ArgumentError (wrong number of arguments (0 for 1)):
  lib/patient_service.rb:1455:in `get_national_id'
  lib/patient_service.rb:1466:in `get_national_id_with_dashes'
  lib/patient_service.rb:841:in `get_patient'
  app/controllers/patients_controller.rb:145:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (99.5ms)
Rendered rescues/_request_and_response (1.5ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:34:30) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m

RuntimeError (here2):
  app/controllers/patients_controller.rb:147:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (31.8ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:34:42) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
Rendering template within layouts/application
Rendering patients/confirm

ActionView::TemplateError (undefined method `name' for nil:NilClass) on line #75 of app/views/patients/confirm.html.erb:
72:     conntinue.innerHTML = '<span>Continue</span>'
73:     conntinue.setAttribute('onmousedown','go();')
74: 
75:     <%if Location.current_location.name.match(/HIV|ART/i) and not Location.current_location.name.match(/Reception/i)%>
76:       weightGraph();
77:     <%end%>
78:   }

    app/views/patients/confirm.html.erb:75
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (105.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:38:20) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m

TypeError (exception class/object expected):
  app/controllers/patients_controller.rb:147:in `raise'
  app/controllers/patients_controller.rb:147:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:38:44) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m

RuntimeError (--- !ruby/object:Location 
attributes: 
  subregion: 
  name: Registration
  country: 
  latitude: 
  postal_code: 
  date_created: 2011-07-25 14:22:18 +02:00
  location_type_id: 
  parent_location: 
  description: Workstation Location
  city_village: 
  retired: 0
  date_retired: 
  uuid: bc311942-587c-11d6-861b-0024217bb78e
  county_district: 
  neighborhood_cell: 
  location_id: 721
  longitude: 
  creator: 1
  region: 
  township_division: 
  retire_reason: 
  state_province: 
  address1: 
  address2: 
  retired_by: 
attributes_cache: {}

):
  app/controllers/patients_controller.rb:147:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:40:19) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m

RuntimeError (--- Registration
):
  app/controllers/patients_controller.rb:147:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:50:04) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering patients/confirm

ActionView::TemplateError (undefined method `url' for "None":String) on line #82 of app/views/patients/confirm.html.erb:
79: 
80:   function go() {
81:     submit_form = $('confirm');
82:     submit_form.action = "<%= task.url %>"
83:     submit_form.submit();
84:   }
85: 

    app/views/patients/confirm.html.erb:82
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (38.6ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:51:41) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering patients/confirm

ActionView::TemplateError (undefined method `url' for nil:NilClass) on line #82 of app/views/patients/confirm.html.erb:
79: 
80:   function go() {
81:     submit_form = $('confirm');
82:    // submit_form.action = "<%= task.url %>"
83:     submit_form.submit();
84:   }
85: 

    app/views/patients/confirm.html.erb:82
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (37.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:52:07) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering patients/confirm
  [4;36;1mConceptName Load (297.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (165.3ms)[0m   [0mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m

ActionView::TemplateError (undefined method `name' for "":String) on line #145 of app/views/patients/confirm.html.erb:
142: </form>
143: 
144: <div id ='header'>
145:   <h1><%= @patient_bean.name %>&nbsp;(<%= @patient_bean.sex %>)</h1>
146:   <table>
147:   <tr>
148:     <th>Age:</th><td><%= @patient_bean.age %></td>

    app/views/patients/confirm.html.erb:145
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (113.9ms)
Rendered rescues/_request_and_response (0.6ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:52:59) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering patients/confirm
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.2ms)[0m   [0;1mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m

ActionView::TemplateError (exception class/object expected) on line #143 of app/views/patients/confirm.html.erb:
140:   <%= hidden_field_tag(:found_person_id, @found_person_id) %>
141:   <%= hidden_field_tag(:relation, @relation) %>
142: </form>
143: <%= raise @person %>
144: <div id ='header'>
145:   <h1><%= @patient_bean.name %>&nbsp;(<%= @patient_bean.sex %>)</h1>
146:   <table>

    app/views/patients/confirm.html.erb:143:in `raise'
    app/views/patients/confirm.html.erb:143
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (43.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:53:13) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering patients/confirm
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.2ms)[0m   [0mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m
  [4;36;1mPersonAddress Load (52.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC[0m
  [4;35;1mObservation Load (0.5ms)[0m   [0mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0)) AND (obs.voided = 0) [0m
  [4;36;1mPatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m

ActionView::TemplateError (--- !ruby/object:Person 
addresses: 
- !ruby/object:PersonAddress 
  attributes: 
    void_reason: 
    subregion: 
    country: 
    latitude: 
    postal_code: 
    date_created: 2013-05-02 08:47:29 +02:00
    preferred: 0
    city_village: Biwi
    voided_by: 
    uuid: ec3e4743-b304-11e2-83b6-0024be7f1be1
    county_district: S/C Chakhadza
    neighborhood_cell: Beleki Farm
    longitude: 
    creator: 1
    voided: 0
    region: 
    township_division: 
    person_id: 174
    state_province: Lilongwe
    person_address_id: 63
    address1: Unknown
    address2: "Dowa "
    date_voided: 
  attributes_cache: {}

attributes: 
  cause_of_death: 
  void_reason: 
  dead: 0
  date_created: 2013-05-02 08:47:29 +02:00
  gender: M
  birthdate_estimated: 1
  voided_by: 
  uuid: ebf9d134-b304-11e2-83b6-0024be7f1be1
  creator: 1
  voided: 0
  person_id: 174
  birthdate: 1975-07-01
  death_date: 
  changed_by: 1
  date_changed: 2013-05-02 08:47:29 +02:00
  date_voided: 
attributes_cache: {}

observations: []

patient: !ruby/object:Patient 
  attributes: 
    void_reason: 
    date_created: 2013-05-02 08:47:30 +02:00
    voided_by: 
    patient_id: 174
    tribe: 
    creator: 1
    voided: 0
    changed_by: 1
    date_changed: 2013-05-02 08:47:30 +02:00
    date_voided: 
  attributes_cache: {}

  patient_identifiers: 
  - !ruby/object:PatientIdentifier 
    attributes: 
      void_reason: 
      patient_identifier_id: 153
      identifier_type: 3
      date_created: 2013-05-02 08:47:30 +02:00
      preferred: 0
      voided_by: 
      uuid: ecc1cd8f-b304-11e2-83b6-0024be7f1be1
      patient_id: 174
      location_id: 1
      creator: 1
      voided: 0
      identifier: K5YYCA
      date_voided: 
    attributes_cache: {}

) on line #143 of app/views/patients/confirm.html.erb:
140:   <%= hidden_field_tag(:found_person_id, @found_person_id) %>
141:   <%= hidden_field_tag(:relation, @relation) %>
142: </form>
143: <%= raise @person.to_yaml %>
144: <div id ='header'>
145:   <h1><%= @patient_bean.name %>&nbsp;(<%= @patient_bean.sex %>)</h1>
146:   <table>

    app/views/patients/confirm.html.erb:143
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (37.2ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:55:53) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.9ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering patients/confirm
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m
  [4;36;1mPerson Load (0.4ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.5ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m

ActionView::TemplateError (--- Fuvu Chirwa
) on line #143 of app/views/patients/confirm.html.erb:
140:   <%= hidden_field_tag(:found_person_id, @found_person_id) %>
141:   <%= hidden_field_tag(:relation, @relation) %>
142: </form>
143: <%= raise @person.patient.name.to_yaml %>
144: <div id ='header'>
145:   <h1><%= @patient_bean.name %>&nbsp;(<%= @patient_bean.sex %>)</h1>
146:   <table>

    app/views/patients/confirm.html.erb:143
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (42.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:57:50) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering patients/confirm
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m

ActionView::TemplateError (--- Fuvu Chirwa
) on line #143 of app/views/patients/confirm.html.erb:
140:   <%= hidden_field_tag(:found_person_id, @found_person_id) %>
141:   <%= hidden_field_tag(:relation, @relation) %>
142: </form>
143: <%= raise @person.patient.name.to_yaml %>
144: <div id ='header'>
145:   <h1><%= @person.patient.name.name %>&nbsp;(<%= @person.patient.sex %>)</h1>
146:   <table>

    app/views/patients/confirm.html.erb:143
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (41.7ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:58:08) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering patients/confirm
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.2ms)[0m   [0mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m

ActionView::TemplateError (undefined method `name' for "Fuvu Chirwa":String) on line #145 of app/views/patients/confirm.html.erb:
142: </form>
143: 
144: <div id ='header'>
145:   <h1><%= @person.patient.name.name %>&nbsp;(<%= @person.patient.sex %>)</h1>
146:   <table>
147:   <tr>
148:     <th>Age:</th><td><%= @person.patient.age %></td>

    app/views/patients/confirm.html.erb:145
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (37.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 15:58:28) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering patients/confirm
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.2ms)[0m   [0mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m

ActionView::TemplateError (undefined method `sex' for #<ActiveRecord::Associations::HasOneAssociation:0xb651ae58>) on line #145 of app/views/patients/confirm.html.erb:
142: </form>
143: 
144: <div id ='header'>
145:   <h1><%= @person.patient.name %>&nbsp;(<%= @person.patient.sex %>)</h1>
146:   <table>
147:   <tr>
148:     <th>Age:</th><td><%= @person.patient.age %></td>

    app/views/patients/confirm.html.erb:145
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (108.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:00:01) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering patients/confirm
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

ActionView::TemplateError (undefined method `guardian' for #<ActiveRecord::Associations::HasOneAssociation:0xb611f204>) on line #154 of app/views/patients/confirm.html.erb:
151:     <th>National ID:</th><td><%= @person.patient.national_id %></td>
152:   </tr>
153:   <tr>
154:     <th>Guardian: </th><td><%= @person.patient.guardian || 'NONE'%></td>
155:   </tr>
156:   </table>
157:   <div>

    app/views/patients/confirm.html.erb:154
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (42.7ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:00:47) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering patients/confirm
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.2ms)[0m   [0mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 315ms (View: 77, DB: 2) | 200 OK [http://localhost/patients/confirm/ext_patient_id?found_person_id=174&location_id=721&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 16:00:47) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 16:00:47) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.flot" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing PeopleController#confirm (for 127.0.0.1 at 2013-05-06 16:00:48) [POST]
  Parameters: {"found_person_id"=>"174", "relation"=>""}
Redirected to http://localhost:3012/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 37ms (DB: 0) | 302 Found [http://localhost/people/confirm]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 16:00:49) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=localhost:3012
Completed in 6ms (DB: 0) | 302 Found [http://localhost/user_login?internal=true]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 16:01:18) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 108ms (View: 47, DB: 0) | 200 OK [http://localhost/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 16:01:21) [POST]
  Parameters: {"program"=>"HYPERTENSION PROGRAM", "user_id"=>"1", "location_id"=>"721"}
Redirected to http://localhost:3012/clinic?location_id=721&user_id=1
Completed in 68ms (DB: 0) | 302 Found [http://localhost/clinic/programs]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 16:01:21) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 102ms (View: 13, DB: 1) | 200 OK [http://localhost/clinic?location_id=721&user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 16:01:22) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering clinic/overview
Completed in 145ms (View: 8, DB: 0) | 200 OK [http://localhost/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 16:01:41) [GET]
  Parameters: {"ext_patient_id"=>"174", "user_id"=>"1", "location_id"=>"721"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (1.6ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://localhost:3012/patients/confirm/ext_patient_id?found_person_id=174&location_id=721&user_id=1
Completed in 79ms (DB: 2) | 302 Found [http://localhost/clinic?location_id=721&user_id=1&ext_patient_id=174]


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:01:41) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (1.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering patients/confirm
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.2ms)[0m   [0mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 264ms (View: 117, DB: 3) | 200 OK [http://localhost/patients/confirm/ext_patient_id?found_person_id=174&location_id=721&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 16:01:42) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 16:01:42) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.flot" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing PeopleController#confirm (for 127.0.0.1 at 2013-05-06 16:01:42) [POST]
  Parameters: {"found_person_id"=>"174", "relation"=>""}
Redirected to http://localhost:3012/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 37ms (DB: 0) | 302 Found [http://localhost/people/confirm]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 16:01:42) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=localhost:3012
Completed in 5ms (DB: 0) | 302 Found [http://localhost/user_login?internal=true]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 16:04:50) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 75ms (View: 18, DB: 0) | 200 OK [http://localhost/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 16:05:35) [POST]
  Parameters: {"program"=>"HYPERTENSION PROGRAM", "user_id"=>"1", "location_id"=>"721"}
Redirected to http://localhost:3012/clinic?location_id=721&user_id=1
Completed in 137ms (DB: 0) | 302 Found [http://localhost/clinic/programs]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 16:05:35) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 86ms (View: 7, DB: 1) | 200 OK [http://localhost/clinic?location_id=721&user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 16:05:35) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering clinic/overview
Completed in 59ms (View: 1, DB: 0) | 200 OK [http://localhost/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 16:05:58) [GET]
  Parameters: {"ext_patient_id"=>"174", "user_id"=>"1", "location_id"=>"721"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://localhost:3012/patients/confirm/ext_patient_id?found_person_id=174&location_id=721&user_id=1
Completed in 147ms (DB: 0) | 302 Found [http://localhost/clinic?location_id=721&user_id=1&ext_patient_id=174]


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:05:59) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/menu
Rendering patients/confirm
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (1.7ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

ActionView::TemplateError (undefined local variable or method `current_user' for #<ActionView::Base:0xb61145c0>) on line #8 of app/views/layouts/menu.rhtml:
5:     <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
6:     <%= @title = "#{controller.controller_name.humanize} #{controller.action_name.humanize}" rescue ""  %>
7:     <script language="javascript">
8:       tstUsername = "<%= current_user.username unless current_user.nil? %>";
9:       tstCurrentDate = "<%= Time.now.strftime("%Y/%m/%d") %>";
10:       var tt_cancel_destination = null;
11:       

    app/views/layouts/menu.rhtml:8:in `_run_rhtml_app47views47layouts47menu46rhtml'
    app/controllers/patients_controller.rb:146:in `confirm'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (107.2ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:11:23) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}

RuntimeError (--- 
name: Super User
token: 8tTOlVtBE8FPRLEZ
user_id: 1
status: ACTIVE
roles: 
- Clinician
- Program Manager
- Registration Clerk
- Superuser
- System Developer
):
  app/controllers/patients_controller.rb:138:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.3ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:13:49) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/menu
Rendering patients/confirm
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

ActionView::TemplateError (undefined method `name' for #<Hash:0xb6bb1d20>) on line #8 of app/views/layouts/menu.rhtml:
5:     <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
6:     <%= @title = "#{controller.controller_name.humanize} #{controller.action_name.humanize}" rescue ""  %>
7:     <script language="javascript">
8:       tstUsername = "<%= @user.name unless @user.nil? %>";
9:       tstCurrentDate = "<%= Time.now.strftime("%Y/%m/%d") %>";
10:       var tt_cancel_destination = null;
11:       

    app/views/layouts/menu.rhtml:8:in `_run_rhtml_app47views47layouts47menu46rhtml'
    app/controllers/patients_controller.rb:148:in `confirm'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (40.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:14:15) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m

NoMethodError (undefined method `name' for #<Hash:0xb6730710>):
  app/controllers/patients_controller.rb:140:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (39.3ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:14:26) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m

NoMethodError (undefined method `username' for #<Hash:0xb62723e0>):
  app/controllers/patients_controller.rb:140:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.6ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:15:15) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m

RuntimeError (--- admin
):
  app/controllers/patients_controller.rb:140:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (107.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:16:47) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}

RuntimeError (--- 
name: Super User
token: 8tTOlVtBE8FPRLEZ
user_id: 1
status: ACTIVE
roles: 
- Clinician
- Program Manager
- Registration Clerk
- Superuser
- System Developer
):
  app/controllers/patients_controller.rb:138:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (34.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:17:05) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}

RuntimeError (--- Super User
):
  app/controllers/patients_controller.rb:138:in `confirm'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.8ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:18:07) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/menu
Rendering patients/confirm
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m

ActionView::TemplateError (undefined local variable or method `fancy_or_high_contrast_touch' for #<ActionView::Base:0xb6ba8158>) on line #39 of app/views/layouts/menu.rhtml:
36: 
37:     </script>
38:     <%= stylesheet_link_tag "mateme" %>
39:     <%= stylesheet_link_tag fancy_or_high_contrast_touch %>
40:     <%= javascript_include_tag "preload" %>
41:   </head>
42:   <body id="mateme">  

    app/views/layouts/menu.rhtml:39:in `_run_rhtml_app47views47layouts47menu46rhtml'
    app/controllers/patients_controller.rb:148:in `confirm'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (43.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:19:34) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/menu
Rendering patients/confirm
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.2ms)[0m   [0mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 311ms (View: 59, DB: 2) | 200 OK [http://localhost/patients/confirm/ext_patient_id?found_person_id=174&location_id=721&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 16:19:34) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 16:19:34) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.flot" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing PeopleController#confirm (for 127.0.0.1 at 2013-05-06 16:19:36) [POST]
  Parameters: {"found_person_id"=>"174", "relation"=>""}
Redirected to http://localhost:3012/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 37ms (DB: 0) | 302 Found [http://localhost/people/confirm]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 16:19:36) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=localhost:3012
Completed in 7ms (DB: 0) | 302 Found [http://localhost/user_login?internal=true]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 16:20:05) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 77ms (View: 18, DB: 0) | 200 OK [http://localhost/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 16:20:08) [POST]
  Parameters: {"program"=>"HYPERTENSION PROGRAM", "user_id"=>"1", "location_id"=>"721"}
Redirected to http://localhost:3012/clinic?location_id=721&user_id=1
Completed in 70ms (DB: 0) | 302 Found [http://localhost/clinic/programs]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 16:20:09) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 94ms (View: 8, DB: 1) | 200 OK [http://localhost/clinic?location_id=721&user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 16:20:09) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering clinic/overview
Completed in 124ms (View: 1, DB: 0) | 200 OK [http://localhost/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 16:20:37) [GET]
  Parameters: {"ext_patient_id"=>"174", "user_id"=>"1", "location_id"=>"721"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://localhost:3012/patients/confirm/ext_patient_id?found_person_id=174&location_id=721&user_id=1
Completed in 161ms (DB: 0) | 302 Found [http://localhost/clinic?location_id=721&user_id=1&ext_patient_id=174]


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:20:37) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/menu
Rendering patients/confirm
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 271ms (View: 108, DB: 2) | 200 OK [http://localhost/patients/confirm/ext_patient_id?found_person_id=174&location_id=721&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 16:20:37) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.flot" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 16:20:37) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 16:20:37) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.flot" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing PeopleController#confirm (for 127.0.0.1 at 2013-05-06 16:20:38) [POST]
  Parameters: {"found_person_id"=>"174", "relation"=>""}
Redirected to http://localhost:3012/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 35ms (DB: 0) | 302 Found [http://localhost/people/confirm]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 16:20:38) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=localhost:3012
Completed in 6ms (DB: 0) | 302 Found [http://localhost/user_login?internal=true]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 16:22:22) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering template within layouts/application
Rendering clinic/programs
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 73ms (View: 14, DB: 0) | 200 OK [http://localhost/?user_id=1&location_id=721]


Processing ClinicController#programs (for 127.0.0.1 at 2013-05-06 16:22:28) [POST]
  Parameters: {"program"=>"HYPERTENSION PROGRAM", "user_id"=>"1", "location_id"=>"721"}
Redirected to http://localhost:3012/clinic?location_id=721&user_id=1
Completed in 133ms (DB: 0) | 302 Found [http://localhost/clinic/programs]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 16:22:28) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/application
Rendering clinic/index
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 182ms (View: 8, DB: 1) | 200 OK [http://localhost/clinic?location_id=721&user_id=1]


Processing ClinicController#overview (for 127.0.0.1 at 2013-05-06 16:22:29) [GET]
  Parameters: {"user_id"=>"1", "location_id"=>"721"}
Rendering clinic/overview
Completed in 58ms (View: 1, DB: 0) | 200 OK [http://localhost/overview?user_id=1&location_id=721]


Processing ClinicController#index (for 127.0.0.1 at 2013-05-06 16:22:47) [GET]
  Parameters: {"ext_patient_id"=>"174", "user_id"=>"1", "location_id"=>"721"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Redirected to http://localhost:3012/patients/confirm/ext_patient_id?found_person_id=174&location_id=721&user_id=1
Completed in 143ms (DB: 1) | 302 Found [http://localhost/clinic?location_id=721&user_id=1&ext_patient_id=174]


Processing PatientsController#confirm (for 127.0.0.1 at 2013-05-06 16:22:47) [GET]
  Parameters: {"found_person_id"=>"174", "user_id"=>"1", "location_id"=>"721", "id"=>"ext_patient_id"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 174) AND (person.voided = 0) [0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 174 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 174 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 174 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
Rendering template within layouts/menu
Rendering patients/confirm
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.2ms)[0m   [0mSELECT * FROM `obs` WHERE (`obs`.`person_id` = 174 AND (`obs`.`voided` = 0) AND (concept_id = 5089)) AND (obs.voided = 0) [0m
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 174 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 174 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 174 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 274ms (View: 50, DB: 2) | 200 OK [http://localhost/patients/confirm/ext_patient_id?found_person_id=174&location_id=721&user_id=1]


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 16:22:48) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.js" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 16:22:48) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.flot" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing ApplicationController#index (for 127.0.0.1 at 2013-05-06 16:22:48) [GET]

ActionController::RoutingError (No route matches "/javascripts/jquery.flot" with {:method=>:get}):
  /usr/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /usr/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /usr/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /usr/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /usr/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /usr/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)


Processing PeopleController#confirm (for 127.0.0.1 at 2013-05-06 16:22:48) [POST]
  Parameters: {"found_person_id"=>"174", "relation"=>""}
Redirected to http://localhost:3012/user_login?internal=true
Filter chain halted as [:check_user] rendered_or_redirected.
Completed in 37ms (DB: 0) | 302 Found [http://localhost/people/confirm]


Processing ClinicController#user_login (for 127.0.0.1 at 2013-05-06 16:22:48) [GET]
  Parameters: {"internal"=>"true"}
Redirected to http://localhost:3004/login?ext=true&src=localhost:3012
Completed in 6ms (DB: 0) | 302 Found [http://localhost/user_login?internal=true]
